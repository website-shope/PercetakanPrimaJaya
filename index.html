<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PRIMA JAYA â€” Percetakan & Jasa Digital</title>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
:root {
  --gold: #C9A84C;
  --gold-light: #E8C96B;
  --dark: #0D0D0D;
  --dark2: #141414;
  --dark3: #1C1C1C;
  --dark4: #242424;
  --surface: #2A2A2A;
  --text: #F0EDE8;
  --text-muted: #8A8278;
  --accent: #E84545;
  --green: #2ECC71;
  --blue: #3498DB;
  --border: rgba(201,168,76,0.2);
  --radius: 12px;
  --shadow: 0 8px 32px rgba(0,0,0,0.4);
}
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'DM Sans',sans-serif; background:var(--dark); color:var(--text); min-height:100vh; }
a { color:inherit; text-decoration:none; }
button { cursor:pointer; font-family:inherit; }
input, textarea, select { font-family:inherit; }

/* SCROLLBAR */
::-webkit-scrollbar { width:6px; }
::-webkit-scrollbar-track { background:var(--dark2); }
::-webkit-scrollbar-thumb { background:var(--gold); border-radius:3px; }

/* ============ HEADER ============ */
header {
  position:fixed; top:0; left:0; right:0; z-index:100;
  background:rgba(13,13,13,0.95); backdrop-filter:blur(20px);
  border-bottom:1px solid var(--border);
  padding:0 24px;
}
.header-inner {
  max-width:1400px; margin:0 auto;
  display:flex; align-items:center; justify-content:space-between;
  height:72px;
}
.logo {
  display:flex; align-items:center; gap:12px;
  font-family:'Playfair Display',serif;
}
.logo-icon {
  width:44px; height:44px;
  background:linear-gradient(135deg, var(--gold), var(--gold-light));
  border-radius:10px;
  display:flex; align-items:center; justify-content:center;
  font-size:20px;
}
.logo-text { font-size:20px; font-weight:700; color:var(--gold); letter-spacing:1px; }
.logo-sub { font-size:10px; color:var(--text-muted); font-family:'DM Sans',sans-serif; font-weight:400; letter-spacing:2px; text-transform:uppercase; }
nav { display:flex; gap:8px; align-items:center; }
nav a, nav button {
  padding:8px 16px; border-radius:8px; font-size:14px; font-weight:500;
  border:none; background:transparent; color:var(--text-muted);
  transition:all 0.2s;
}
nav a:hover, nav button:hover { color:var(--text); background:var(--dark3); }
nav a.active { color:var(--gold); }
.btn-cart {
  position:relative; background:var(--dark3) !important;
  color:var(--text) !important; border:1px solid var(--border) !important;
}
.cart-badge {
  position:absolute; top:-6px; right:-6px;
  background:var(--accent); color:#fff; font-size:10px; font-weight:700;
  width:18px; height:18px; border-radius:50%;
  display:flex; align-items:center; justify-content:center;
}
.btn-admin-header {
  background:linear-gradient(135deg, var(--gold), var(--gold-light)) !important;
  color:var(--dark) !important; font-weight:600 !important;
}

/* ============ HERO ============ */
.hero {
  margin-top:72px;
  min-height:90vh;
  display:flex; align-items:center; justify-content:center;
  position:relative; overflow:hidden;
  background:var(--dark2);
}
.hero-bg {
  position:absolute; inset:0;
  background: 
    radial-gradient(ellipse 80% 60% at 20% 50%, rgba(201,168,76,0.08) 0%, transparent 60%),
    radial-gradient(ellipse 60% 80% at 80% 30%, rgba(201,168,76,0.05) 0%, transparent 60%);
}
.hero-grid {
  position:absolute; inset:0; opacity:0.03;
  background-image: linear-gradient(var(--gold) 1px, transparent 1px), linear-gradient(90deg, var(--gold) 1px, transparent 1px);
  background-size: 60px 60px;
}
.hero-content {
  position:relative; z-index:1;
  max-width:1400px; width:100%; margin:0 auto;
  padding:80px 24px;
  display:grid; grid-template-columns:1fr 1fr; gap:80px; align-items:center;
}
.hero-tag {
  display:inline-flex; align-items:center; gap:8px;
  background:rgba(201,168,76,0.1); border:1px solid var(--border);
  padding:6px 16px; border-radius:100px;
  font-size:12px; color:var(--gold); font-weight:500;
  margin-bottom:24px; letter-spacing:1px; text-transform:uppercase;
}
.hero h1 {
  font-family:'Playfair Display',serif;
  font-size:clamp(42px, 5vw, 72px);
  line-height:1.1; font-weight:900;
  margin-bottom:24px;
}
.hero h1 span { color:var(--gold); }
.hero p {
  font-size:18px; color:var(--text-muted); line-height:1.7;
  margin-bottom:40px; max-width:480px;
}
.hero-actions { display:flex; gap:16px; flex-wrap:wrap; }
.btn-primary {
  padding:16px 32px; border-radius:10px;
  background:linear-gradient(135deg, var(--gold), var(--gold-light));
  color:var(--dark); font-weight:600; font-size:16px;
  border:none; transition:all 0.3s;
  box-shadow: 0 4px 20px rgba(201,168,76,0.3);
}
.btn-primary:hover { transform:translateY(-2px); box-shadow:0 8px 30px rgba(201,168,76,0.4); }
.btn-secondary {
  padding:16px 32px; border-radius:10px;
  background:transparent; color:var(--text);
  border:1px solid var(--border); font-weight:500; font-size:16px;
  transition:all 0.3s;
}
.btn-secondary:hover { background:var(--dark3); border-color:var(--gold); }
.hero-stats {
  display:grid; grid-template-columns:repeat(3,1fr); gap:20px;
  margin-top:48px;
}
.stat-item { text-align:center; }
.stat-num { font-family:'Playfair Display',serif; font-size:36px; font-weight:700; color:var(--gold); }
.stat-label { font-size:12px; color:var(--text-muted); text-transform:uppercase; letter-spacing:1px; margin-top:4px; }
.hero-visual {
  display:grid; grid-template-columns:1fr 1fr; gap:16px;
}
.hero-card {
  background:var(--dark3); border:1px solid var(--border);
  border-radius:16px; padding:24px;
  transition:all 0.3s;
}
.hero-card:hover { border-color:var(--gold); transform:translateY(-4px); }
.hero-card-icon { font-size:36px; margin-bottom:12px; }
.hero-card h3 { font-size:16px; font-weight:600; margin-bottom:6px; }
.hero-card p { font-size:13px; color:var(--text-muted); }
.hero-card.featured {
  grid-column:1/-1;
  background:linear-gradient(135deg, rgba(201,168,76,0.1), rgba(201,168,76,0.05));
  border-color:var(--gold);
}

/* ============ SECTION ============ */
section { padding:80px 24px; }
.section-inner { max-width:1400px; margin:0 auto; }
.section-header { text-align:center; margin-bottom:56px; }
.section-tag {
  display:inline-block;
  background:rgba(201,168,76,0.1); color:var(--gold);
  padding:4px 16px; border-radius:100px;
  font-size:12px; font-weight:600; letter-spacing:2px; text-transform:uppercase;
  margin-bottom:16px;
}
.section-header h2 {
  font-family:'Playfair Display',serif;
  font-size:clamp(28px, 4vw, 48px); font-weight:700;
  margin-bottom:16px;
}
.section-header p { font-size:16px; color:var(--text-muted); max-width:500px; margin:0 auto; }

/* ============ PRODUCTS ============ */
.products-section { background:var(--dark2); }
.filter-bar {
  display:flex; gap:8px; justify-content:center; margin-bottom:40px;
  flex-wrap:wrap;
}
.filter-btn {
  padding:8px 20px; border-radius:100px; font-size:14px; font-weight:500;
  border:1px solid var(--border); background:transparent; color:var(--text-muted);
  transition:all 0.2s;
}
.filter-btn.active, .filter-btn:hover {
  background:var(--gold); color:var(--dark); border-color:var(--gold); font-weight:600;
}
.products-grid {
  display:grid; grid-template-columns:repeat(auto-fill, minmax(280px, 1fr)); gap:24px;
}
.product-card {
  background:var(--dark3); border:1px solid var(--border);
  border-radius:16px; overflow:hidden;
  transition:all 0.3s; cursor:pointer;
}
.product-card:hover { transform:translateY(-6px); border-color:var(--gold); box-shadow:0 20px 40px rgba(0,0,0,0.4); }
.product-img {
  width:100%; height:200px;
  display:flex; align-items:center; justify-content:center;
  font-size:64px; position:relative; overflow:hidden;
}
.product-badge {
  position:absolute; top:12px; left:12px;
  background:var(--accent); color:#fff;
  padding:4px 10px; border-radius:6px; font-size:11px; font-weight:600;
}
.product-badge.new { background:var(--green); }
.product-info { padding:20px; }
.product-name { font-weight:600; font-size:16px; margin-bottom:6px; }
.product-desc { font-size:13px; color:var(--text-muted); margin-bottom:16px; line-height:1.5; }
.product-price { font-size:20px; font-weight:700; color:var(--gold); }
.product-price .old { font-size:13px; color:var(--text-muted); text-decoration:line-through; margin-left:8px; font-weight:400; }
.product-actions {
  display:flex; gap:8px; margin-top:16px;
}
.btn-add-cart {
  flex:1; padding:10px; border-radius:8px;
  background:linear-gradient(135deg, var(--gold), var(--gold-light));
  color:var(--dark); border:none; font-weight:600; font-size:14px;
  transition:all 0.2s;
}
.btn-add-cart:hover { opacity:0.9; transform:translateY(-1px); }
.btn-detail {
  padding:10px 16px; border-radius:8px;
  background:var(--surface); color:var(--text); border:1px solid var(--border);
  font-size:14px; transition:all 0.2s;
}

/* ============ HOW IT WORKS ============ */
.steps-grid {
  display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:24px;
}
.step-card {
  text-align:center; padding:32px 24px;
  background:var(--dark3); border:1px solid var(--border); border-radius:16px;
  position:relative;
}
.step-num {
  position:absolute; top:-16px; left:50%; transform:translateX(-50%);
  width:32px; height:32px; border-radius:50%;
  background:linear-gradient(135deg, var(--gold), var(--gold-light));
  color:var(--dark); font-weight:700; font-size:14px;
  display:flex; align-items:center; justify-content:center;
}
.step-icon { font-size:40px; margin:16px 0 12px; }
.step-card h3 { font-size:16px; font-weight:600; margin-bottom:8px; }
.step-card p { font-size:13px; color:var(--text-muted); }

/* ============ SHIPPING INFO ============ */
.shipping-section { background:var(--dark2); }
.shipping-calc {
  background:var(--dark3); border:1px solid var(--border); border-radius:20px;
  padding:40px; max-width:600px; margin:0 auto;
}
.shipping-calc h3 {
  font-family:'Playfair Display',serif; font-size:24px; text-align:center; margin-bottom:8px;
}
.shipping-calc > p { text-align:center; color:var(--text-muted); margin-bottom:32px; }
.form-group { margin-bottom:20px; }
.form-group label { display:block; font-size:14px; font-weight:500; color:var(--text-muted); margin-bottom:8px; }
.form-group input, .form-group select {
  width:100%; padding:12px 16px; border-radius:10px;
  background:var(--dark4); border:1px solid var(--border);
  color:var(--text); font-size:15px; transition:all 0.2s;
}
.form-group input:focus, .form-group select:focus {
  outline:none; border-color:var(--gold);
  box-shadow:0 0 0 3px rgba(201,168,76,0.1);
}
.shipping-result {
  margin-top:24px; padding:20px; border-radius:12px;
  background:rgba(201,168,76,0.1); border:1px solid var(--gold);
  display:none;
}
.shipping-result.show { display:block; }
.shipping-result-row {
  display:flex; justify-content:space-between; align-items:center;
  padding:8px 0; border-bottom:1px solid rgba(255,255,255,0.05);
}
.shipping-result-row:last-child { border:none; padding-top:12px; font-weight:700; font-size:18px; }
.shipping-result-row span:last-child { color:var(--gold); }

/* ============ REVIEWS ============ */
.reviews-section { background:var(--dark); }
.reviews-grid {
  display:grid; grid-template-columns:repeat(auto-fill, minmax(300px, 1fr)); gap:20px;
}
.review-card {
  background:var(--dark3); border:1px solid var(--border);
  border-radius:16px; padding:24px;
  transition:all 0.3s;
}
.review-card:hover { border-color:var(--gold); }
.review-header { display:flex; align-items:center; gap:12px; margin-bottom:12px; }
.review-avatar {
  width:44px; height:44px; border-radius:50%;
  background:linear-gradient(135deg, var(--gold), var(--gold-light));
  display:flex; align-items:center; justify-content:center;
  font-weight:700; font-size:18px; color:var(--dark); flex-shrink:0;
}
.review-meta h4 { font-weight:600; font-size:15px; }
.review-meta span { font-size:12px; color:var(--text-muted); }
.review-stars { color:#FFD700; font-size:14px; margin-bottom:10px; }
.review-text { font-size:14px; color:var(--text-muted); line-height:1.6; }
.review-source {
  display:flex; align-items:center; gap:6px;
  margin-top:12px; font-size:12px; color:var(--text-muted);
}
.gmaps-badge {
  text-align:center; margin-bottom:32px;
  padding:16px; background:rgba(52,168,83,0.1); border:1px solid rgba(52,168,83,0.3);
  border-radius:12px; max-width:400px; margin:0 auto 40px;
}
.gmaps-badge .rating-big { font-size:48px; font-weight:700; color:#fff; font-family:'Playfair Display',serif; }
.gmaps-badge .stars-big { font-size:24px; color:#FFD700; margin:4px 0; }
.gmaps-badge p { font-size:13px; color:var(--text-muted); }

/* ============ FOOTER ============ */
footer {
  background:var(--dark2); border-top:1px solid var(--border);
  padding:60px 24px 24px;
}
.footer-inner { max-width:1400px; margin:0 auto; }
.footer-grid {
  display:grid; grid-template-columns:2fr 1fr 1fr 1fr; gap:40px; margin-bottom:40px;
}
.footer-brand .logo { margin-bottom:16px; }
.footer-brand p { font-size:14px; color:var(--text-muted); line-height:1.7; max-width:280px; }
.footer-col h4 { font-weight:600; margin-bottom:16px; font-size:15px; color:var(--gold); }
.footer-col ul { list-style:none; }
.footer-col ul li { margin-bottom:10px; }
.footer-col ul li a { font-size:14px; color:var(--text-muted); transition:color 0.2s; }
.footer-col ul li a:hover { color:var(--text); }
.footer-bottom {
  border-top:1px solid var(--border); padding-top:24px;
  display:flex; justify-content:space-between; align-items:center;
  font-size:13px; color:var(--text-muted); flex-wrap:wrap; gap:12px;
}

/* ============ MODAL ============ */
.modal-overlay {
  position:fixed; inset:0; z-index:1000;
  background:rgba(0,0,0,0.85); backdrop-filter:blur(8px);
  display:flex; align-items:center; justify-content:center;
  padding:20px; opacity:0; pointer-events:none; transition:opacity 0.3s;
}
.modal-overlay.show { opacity:1; pointer-events:all; }
.modal {
  background:var(--dark3); border:1px solid var(--border);
  border-radius:20px; width:100%; max-width:600px; max-height:90vh; overflow-y:auto;
  transform:translateY(20px); transition:transform 0.3s;
}
.modal-overlay.show .modal { transform:translateY(0); }
.modal-header {
  padding:24px 28px; border-bottom:1px solid var(--border);
  display:flex; justify-content:space-between; align-items:center;
  position:sticky; top:0; background:var(--dark3); z-index:1;
}
.modal-header h2 { font-family:'Playfair Display',serif; font-size:22px; }
.modal-close {
  width:36px; height:36px; border-radius:50%; border:1px solid var(--border);
  background:var(--surface); color:var(--text); font-size:18px;
  display:flex; align-items:center; justify-content:center;
}
.modal-close:hover { background:var(--accent); border-color:var(--accent); }
.modal-body { padding:28px; }

/* CHECKOUT */
.checkout-steps {
  display:flex; gap:8px; margin-bottom:32px;
}
.checkout-step {
  flex:1; text-align:center; padding:10px;
  border-radius:8px; font-size:13px; font-weight:500;
  background:var(--surface); color:var(--text-muted);
  border:1px solid var(--border);
}
.checkout-step.active { background:rgba(201,168,76,0.15); color:var(--gold); border-color:var(--gold); }
.checkout-step.done { background:rgba(46,204,113,0.15); color:var(--green); border-color:var(--green); }

.order-item {
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 0; border-bottom:1px solid var(--border);
}
.order-item:last-child { border:none; }
.order-total {
  display:flex; justify-content:space-between; font-weight:700; font-size:20px;
  padding-top:16px; color:var(--gold);
}

.payment-methods { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin:20px 0; }
.payment-method {
  padding:16px; border-radius:12px; border:2px solid var(--border);
  background:var(--surface); cursor:pointer; text-align:center; transition:all 0.2s;
}
.payment-method.selected { border-color:var(--gold); background:rgba(201,168,76,0.1); }
.payment-method .pm-icon { font-size:28px; margin-bottom:8px; }
.payment-method h4 { font-size:14px; font-weight:600; }
.payment-method p { font-size:12px; color:var(--text-muted); }

.qris-display {
  text-align:center; padding:20px;
  background:var(--dark4); border-radius:16px; margin:20px 0;
}
.qris-code {
  width:200px; height:200px; margin:0 auto 16px;
  background:#fff; border-radius:12px; padding:16px;
  display:flex; align-items:center; justify-content:center;
  font-size:12px; color:#333; text-align:center; flex-direction:column;
  gap:8px; position:relative; overflow:hidden;
}
.qris-pattern {
  display:grid; grid-template-columns:repeat(10,1fr); gap:2px; width:100%; height:100%;
}
.qris-cell {
  background:#000; border-radius:1px;
}
.qris-info { font-size:14px; color:var(--text-muted); }
.qris-info strong { color:var(--gold); font-size:18px; }
.qris-bank { margin-top:12px; display:flex; gap:8px; justify-content:center; flex-wrap:wrap; }
.bank-badge {
  padding:4px 12px; border-radius:6px;
  background:var(--dark3); border:1px solid var(--border);
  font-size:12px; font-weight:600;
}

/* ADMIN LOGIN */
.admin-login {
  position:fixed; inset:0; z-index:2000;
  background:rgba(0,0,0,0.95); backdrop-filter:blur(20px);
  display:flex; align-items:center; justify-content:center;
  padding:20px; display:none;
}
.admin-login.show { display:flex; }
.admin-login-card {
  background:var(--dark3); border:1px solid var(--gold);
  border-radius:20px; padding:40px; width:100%; max-width:400px;
  text-align:center;
}
.admin-login-card h2 { font-family:'Playfair Display',serif; font-size:28px; margin-bottom:8px; }
.admin-login-card > p { color:var(--text-muted); margin-bottom:32px; }
.form-group input[type="password"] { letter-spacing:4px; text-align:center; font-size:18px; }

/* ADMIN PANEL */
.admin-panel {
  position:fixed; inset:0; z-index:1500;
  background:var(--dark); overflow-y:auto; display:none;
}
.admin-panel.show { display:block; }
.admin-header {
  background:var(--dark2); border-bottom:1px solid var(--border);
  padding:0 24px; position:sticky; top:0; z-index:10;
}
.admin-header-inner {
  max-width:1400px; margin:0 auto;
  display:flex; align-items:center; justify-content:space-between; height:64px;
}
.admin-title { font-family:'Playfair Display',serif; font-size:20px; color:var(--gold); }
.admin-nav { display:flex; gap:4px; }
.admin-nav button {
  padding:8px 16px; border-radius:8px; font-size:14px; font-weight:500;
  border:none; background:transparent; color:var(--text-muted);
  transition:all 0.2s;
}
.admin-nav button.active { background:rgba(201,168,76,0.15); color:var(--gold); }
.admin-body { max-width:1400px; margin:0 auto; padding:32px 24px; }
.admin-section { display:none; }
.admin-section.active { display:block; }
.admin-cards {
  display:grid; grid-template-columns:repeat(auto-fit, minmax(200px, 1fr)); gap:20px;
  margin-bottom:40px;
}
.admin-card {
  background:var(--dark3); border:1px solid var(--border); border-radius:16px; padding:24px;
}
.admin-card .ac-icon { font-size:36px; margin-bottom:12px; }
.admin-card h3 { font-size:28px; font-weight:700; color:var(--gold); }
.admin-card p { font-size:14px; color:var(--text-muted); margin-top:4px; }

.table-wrap { overflow-x:auto; }
table { width:100%; border-collapse:collapse; }
table th {
  text-align:left; padding:12px 16px;
  background:var(--dark4); color:var(--gold);
  font-size:13px; text-transform:uppercase; letter-spacing:1px;
  border-bottom:1px solid var(--border);
}
table td { padding:12px 16px; border-bottom:1px solid rgba(255,255,255,0.04); font-size:14px; }
table tr:hover td { background:rgba(255,255,255,0.02); }

.btn-edit, .btn-del {
  padding:6px 12px; border-radius:6px; font-size:12px; font-weight:600;
  border:none; margin-right:6px; cursor:pointer;
}
.btn-edit { background:rgba(52,152,219,0.2); color:#3498DB; }
.btn-del { background:rgba(232,69,69,0.2); color:var(--accent); }
.btn-add-product {
  padding:12px 24px; border-radius:10px;
  background:linear-gradient(135deg, var(--gold), var(--gold-light));
  color:var(--dark); font-weight:600; border:none; font-size:15px;
  margin-bottom:20px; transition:all 0.2s;
}
.btn-add-product:hover { opacity:0.9; }

/* TOAST */
.toast {
  position:fixed; bottom:24px; right:24px; z-index:9999;
  background:var(--dark3); border:1px solid var(--border);
  border-radius:12px; padding:16px 20px;
  display:flex; align-items:center; gap:12px;
  font-size:14px; font-weight:500;
  transform:translateY(100px); opacity:0; transition:all 0.3s;
  max-width:320px;
}
.toast.show { transform:translateY(0); opacity:1; }
.toast.success { border-color:var(--green); }
.toast.success .toast-icon { color:var(--green); }
.toast.error { border-color:var(--accent); }
.toast.error .toast-icon { color:var(--accent); }
.toast-icon { font-size:20px; }

/* BANNER SECTION */
.banner-strip {
  background:linear-gradient(90deg, var(--dark2), var(--dark4), var(--dark2));
  border-top:1px solid var(--border); border-bottom:1px solid var(--border);
  padding:16px 24px; overflow:hidden; position:relative;
}
.banner-strip-inner {
  display:flex; gap:60px; align-items:center;
  white-space:nowrap; animation:marquee 20s linear infinite;
}
@keyframes marquee {
  0% { transform:translateX(0); }
  100% { transform:translateX(-50%); }
}
.banner-item { display:flex; align-items:center; gap:10px; font-size:14px; color:var(--text-muted); }
.banner-item span { color:var(--gold); }

/* PAYMENT SECTION */
.payment-section { background:var(--dark2); }
.payment-features {
  display:grid; grid-template-columns:repeat(auto-fit, minmax(250px, 1fr)); gap:24px;
}
.payment-feat {
  background:var(--dark3); border:1px solid var(--border); border-radius:16px;
  padding:28px; transition:all 0.3s;
}
.payment-feat:hover { border-color:var(--gold); }
.payment-feat .pf-icon { font-size:40px; margin-bottom:16px; }
.payment-feat h3 { font-size:18px; font-weight:600; margin-bottom:8px; }
.payment-feat p { font-size:14px; color:var(--text-muted); line-height:1.6; }
.bank-list { display:flex; flex-wrap:wrap; gap:8px; margin-top:12px; }
.bank-chip {
  padding:4px 12px; border-radius:100px;
  background:rgba(201,168,76,0.1); border:1px solid var(--border);
  font-size:12px; font-weight:600; color:var(--gold);
}

/* DETAIL MODAL */
.detail-gallery {
  width:100%; height:200px; border-radius:12px;
  display:flex; align-items:center; justify-content:center;
  font-size:80px; margin-bottom:20px;
}
.detail-price-row {
  display:flex; align-items:center; gap:12px; margin:12px 0;
}
.detail-price { font-size:32px; font-weight:700; color:var(--gold); }
.spec-grid { display:grid; grid-template-columns:1fr 1fr; gap:12px; margin:16px 0; }
.spec-item { background:var(--surface); border-radius:8px; padding:12px; }
.spec-item label { font-size:11px; color:var(--text-muted); text-transform:uppercase; letter-spacing:1px; }
.spec-item p { font-size:14px; font-weight:500; margin-top:4px; }
.qty-control { display:flex; align-items:center; gap:12px; margin:16px 0; }
.qty-btn {
  width:36px; height:36px; border-radius:8px; border:1px solid var(--border);
  background:var(--surface); color:var(--text); font-size:18px; font-weight:300;
}
.qty-btn:hover { border-color:var(--gold); }
.qty-num { font-size:18px; font-weight:600; min-width:32px; text-align:center; }

/* CART SIDEBAR */
.cart-sidebar {
  position:fixed; right:0; top:0; bottom:0; width:420px; z-index:500;
  background:var(--dark3); border-left:1px solid var(--border);
  transform:translateX(100%); transition:transform 0.3s;
  display:flex; flex-direction:column;
}
.cart-sidebar.show { transform:translateX(0); }
.cart-header {
  padding:24px; border-bottom:1px solid var(--border);
  display:flex; justify-content:space-between; align-items:center;
}
.cart-header h2 { font-family:'Playfair Display',serif; font-size:22px; }
.cart-items { flex:1; overflow-y:auto; padding:16px; }
.cart-item {
  display:flex; gap:16px; padding:16px;
  background:var(--surface); border-radius:12px; margin-bottom:12px;
  border:1px solid var(--border);
}
.cart-item-icon { font-size:40px; width:60px; text-align:center; }
.cart-item-info { flex:1; }
.cart-item-info h4 { font-weight:600; margin-bottom:4px; }
.cart-item-info p { font-size:13px; color:var(--text-muted); }
.cart-item-price { font-weight:700; color:var(--gold); font-size:16px; margin-top:6px; }
.btn-remove { color:var(--accent); background:none; border:none; font-size:18px; padding:4px; }
.cart-footer {
  padding:24px; border-top:1px solid var(--border);
}
.cart-summary-row {
  display:flex; justify-content:space-between; margin-bottom:8px; font-size:14px;
}
.cart-summary-row.total { font-size:20px; font-weight:700; color:var(--gold); padding-top:12px; border-top:1px solid var(--border); margin-top:8px; }

.overlay-bg {
  position:fixed; inset:0; background:rgba(0,0,0,0.5); z-index:499;
  opacity:0; pointer-events:none; transition:opacity 0.3s;
}
.overlay-bg.show { opacity:1; pointer-events:all; }

/* STATUS BADGE */
.badge { padding:4px 10px; border-radius:100px; font-size:12px; font-weight:600; }
.badge-green { background:rgba(46,204,113,0.15); color:var(--green); }
.badge-gold { background:rgba(201,168,76,0.15); color:var(--gold); }
.badge-red { background:rgba(232,69,69,0.15); color:var(--accent); }
.badge-blue { background:rgba(52,152,219,0.15); color:var(--blue); }

/* NOTIFICATION PANEL */
.notif-dot {
  width:8px; height:8px; background:var(--accent); border-radius:50%;
  position:absolute; top:10px; right:10px;
}

/* RANGE SLIDER */
input[type="range"] {
  width:100%; accent-color:var(--gold);
}

/* RESPONSIVE */
@media (max-width: 768px) {
  .hero-content { grid-template-columns:1fr; gap:40px; }
  .hero-visual { display:none; }
  .footer-grid { grid-template-columns:1fr 1fr; }
  nav .hide-mobile { display:none; }
  .cart-sidebar { width:100%; }
}
@media (max-width: 480px) {
  .footer-grid { grid-template-columns:1fr; }
  .payment-methods { grid-template-columns:1fr; }
}

/* ANIMATIONS */
@keyframes fadeUp {
  from { opacity:0; transform:translateY(30px); }
  to { opacity:1; transform:translateY(0); }
}
.fade-up { animation:fadeUp 0.6s ease forwards; }
.fade-up-delay-1 { animation-delay:0.1s; opacity:0; }
.fade-up-delay-2 { animation-delay:0.2s; opacity:0; }
.fade-up-delay-3 { animation-delay:0.3s; opacity:0; }

.pulse { animation:pulse 2s infinite; }
@keyframes pulse {
  0%,100% { opacity:1; }
  50% { opacity:0.6; }
}

/* CUSTOM SELECT */
select option { background:var(--dark3); }

/* ADMIN FORM */
.admin-form {
  background:var(--dark3); border:1px solid var(--border);
  border-radius:16px; padding:28px;
}
.admin-form h3 { font-size:18px; font-weight:600; margin-bottom:24px; }
.form-row { display:grid; grid-template-columns:1fr 1fr; gap:16px; }
@media (max-width:600px) { .form-row { grid-template-columns:1fr; } }
.form-group textarea {
  width:100%; padding:12px 16px; border-radius:10px;
  background:var(--dark4); border:1px solid var(--border);
  color:var(--text); font-size:15px; resize:vertical; min-height:100px;
}
.form-group textarea:focus { outline:none; border-color:var(--gold); }
.switch-wrap { display:flex; align-items:center; gap:12px; }
.switch {
  width:48px; height:26px; border-radius:100px;
  background:var(--surface); border:1px solid var(--border);
  position:relative; cursor:pointer; transition:all 0.3s;
}
.switch.on { background:var(--green); border-color:var(--green); }
.switch-thumb {
  position:absolute; top:2px; left:2px;
  width:20px; height:20px; border-radius:50%; background:#fff;
  transition:all 0.3s;
}
.switch.on .switch-thumb { left:24px; }

/* ORDER STATUS */
.order-progress {
  display:flex; align-items:center; gap:0; margin:20px 0;
}
.op-step {
  flex:1; text-align:center;
}
.op-circle {
  width:36px; height:36px; border-radius:50%; margin:0 auto 6px;
  background:var(--surface); border:2px solid var(--border);
  display:flex; align-items:center; justify-content:center; font-size:14px; position:relative; z-index:1;
}
.op-step.done .op-circle { background:var(--green); border-color:var(--green); }
.op-step.active .op-circle { background:var(--gold); border-color:var(--gold); color:var(--dark); }
.op-step p { font-size:11px; color:var(--text-muted); }
.op-line {
  flex:none; width:40px; height:2px; background:var(--border); margin-bottom:22px;
}
.op-line.done { background:var(--green); }

/* WHATSAPP FLOAT */
.wa-float {
  position:fixed; bottom:24px; left:24px; z-index:400;
  background:#25D366; color:#fff;
  width:56px; height:56px; border-radius:50%; border:none;
  font-size:26px; display:flex; align-items:center; justify-content:center;
  box-shadow:0 4px 20px rgba(37,211,102,0.4); transition:all 0.3s;
}
.wa-float:hover { transform:scale(1.1); box-shadow:0 6px 30px rgba(37,211,102,0.5); }

/* PROMO BANNER */
.promo-banner {
  background:linear-gradient(90deg, rgba(201,168,76,0.15), rgba(201,168,76,0.05), rgba(201,168,76,0.15));
  border:1px solid var(--border); border-radius:12px; padding:16px 24px;
  display:flex; align-items:center; justify-content:space-between;
  margin-bottom:24px; flex-wrap:wrap; gap:12px;
}
.promo-banner h3 { font-size:16px; font-weight:600; }
.promo-banner p { font-size:14px; color:var(--text-muted); }
.promo-code {
  background:var(--dark4); border:1px dashed var(--gold);
  padding:8px 16px; border-radius:8px; font-weight:700; color:var(--gold);
  font-size:18px; letter-spacing:2px;
}

/* LOADING */
.loading-spinner {
  width:40px; height:40px; border:3px solid var(--border);
  border-top-color:var(--gold); border-radius:50%;
  animation:spin 0.8s linear infinite; margin:0 auto;
}
@keyframes spin { to { transform:rotate(360deg); } }
</style>
</head>
<body>

<!-- HEADER -->
<header>
  <div class="header-inner">
    <div class="logo">
      <div class="logo-icon">ğŸ–¨ï¸</div>
      <div>
        <div class="logo-text">PRIMA JAYA</div>
        <div class="logo-sub">Percetakan & Jasa Digital</div>
      </div>
    </div>
    <nav>
      <a href="#hero" class="active">Beranda</a>
      <a href="#products" class="hide-mobile">Produk</a>
      <a href="#shipping" class="hide-mobile">Pengiriman</a>
      <a href="#reviews" class="hide-mobile">Ulasan</a>
      <button class="btn-cart" onclick="toggleCart()">ğŸ›’ Keranjang <span class="cart-badge" id="cart-badge">0</span></button>
      <button class="btn-admin-header" onclick="showAdminLogin()">âš™ï¸ Admin</button>
    </nav>
  </div>
</header>

<!-- BANNER STRIP -->
<div class="banner-strip" style="margin-top:72px;">
  <div class="banner-strip-inner" id="banner-strip">
    <div class="banner-item">âœ… <span>Gratis Desain</span> untuk pemesanan pertama</div>
    <div class="banner-item">ğŸšš <span>Ongkir Otomatis</span> berdasarkan jarak GPS</div>
    <div class="banner-item">ğŸ’³ <span>QRIS & COD</span> tersedia semua bank</div>
    <div class="banner-item">â­ <span>4.9/5</span> rating di Google Maps</div>
    <div class="banner-item">ğŸ“¦ <span>Pengiriman Cepat</span> 1-3 hari kerja</div>
    <div class="banner-item">ğŸ”§ <span>Garansi Pemasangan</span> AC & CCTV 1 tahun</div>
    <div class="banner-item">âœ… <span>Gratis Desain</span> untuk pemesanan pertama</div>
    <div class="banner-item">ğŸšš <span>Ongkir Otomatis</span> berdasarkan jarak GPS</div>
    <div class="banner-item">ğŸ’³ <span>QRIS & COD</span> tersedia semua bank</div>
    <div class="banner-item">â­ <span>4.9/5</span> rating di Google Maps</div>
  </div>
</div>

<!-- HERO -->
<section id="hero">
  <div class="hero-bg"></div>
  <div class="hero-grid"></div>
  <div class="hero-content">
    <div class="fade-up">
      <div class="hero-tag">ğŸ† Terpercaya sejak 2015</div>
      <h1>Solusi Cetak & Jasa <span>Digital Terbaik</span></h1>
      <p>Percetakan undangan, banner, spanduk premium â€” plus jasa pemasangan AC & CCTV profesional. Kualitas terjamin, harga terjangkau, pengiriman sampai depan pintu.</p>
      <div class="hero-actions">
        <button class="btn-primary" onclick="scrollTo({top: document.getElementById('products').offsetTop - 80, behavior:'smooth'})">ğŸ›ï¸ Lihat Produk</button>
        <button class="btn-secondary" onclick="scrollTo({top: document.getElementById('shipping').offsetTop - 80, behavior:'smooth'})">ğŸ“¦ Cek Ongkir</button>
      </div>
      <div class="hero-stats">
        <div class="stat-item"><div class="stat-num">2.4K+</div><div class="stat-label">Pelanggan Puas</div></div>
        <div class="stat-item"><div class="stat-num">4.9â˜…</div><div class="stat-label">Rating Google</div></div>
        <div class="stat-item"><div class="stat-num">8+</div><div class="stat-label">Tahun Berpengalaman</div></div>
      </div>
    </div>
    <div class="hero-visual fade-up fade-up-delay-1">
      <div class="hero-card">
        <div class="hero-card-icon">ğŸ’Œ</div>
        <h3>Undangan Digital & Cetak</h3>
        <p>Design eksklusif, kualitas premium</p>
      </div>
      <div class="hero-card">
        <div class="hero-card-icon">ğŸ·ï¸</div>
        <h3>Banner & Spanduk</h3>
        <p>Cetak resolusi tinggi, tahan cuaca</p>
      </div>
      <div class="hero-card featured">
        <div class="hero-card-icon">â„ï¸ğŸ”’</div>
        <h3>Pasang AC & CCTV</h3>
        <p>Teknisi berpengalaman, garansi 1 tahun, survei gratis</p>
      </div>
    </div>
  </div>
</section>

<!-- PRODUCTS -->
<section id="products" class="products-section">
  <div class="section-inner">
    <div class="section-header">
      <div class="section-tag">Katalog Kami</div>
      <h2>Semua Produk & Layanan</h2>
      <p>Dari percetakan berkualitas hingga jasa instalasi profesional</p>
    </div>
    
    <div class="promo-banner">
      <div>
        <h3>ğŸ‰ Promo Spesial Bulan Ini!</h3>
        <p>Diskon 15% untuk pemesanan undangan di atas 100 lembar</p>
      </div>
      <div class="promo-code">PRIMA15</div>
    </div>

    <div class="filter-bar">
      <button class="filter-btn active" onclick="filterProducts('all', this)">Semua</button>
      <button class="filter-btn" onclick="filterProducts('percetakan', this)">ğŸ–¨ï¸ Percetakan</button>
      <button class="filter-btn" onclick="filterProducts('banner', this)">ğŸ·ï¸ Banner</button>
      <button class="filter-btn" onclick="filterProducts('ac', this)">â„ï¸ Jasa AC</button>
      <button class="filter-btn" onclick="filterProducts('cctv', this)">ğŸ“· CCTV</button>
    </div>
    
    <div class="products-grid" id="products-grid"></div>
  </div>
</section>

<!-- HOW IT WORKS -->
<section id="howitworks" style="background:var(--dark);">
  <div class="section-inner">
    <div class="section-header">
      <div class="section-tag">Cara Pesan</div>
      <h2>Mudah Dalam 5 Langkah</h2>
    </div>
    <div class="steps-grid">
      <div class="step-card">
        <div class="step-num">1</div>
        <div class="step-icon">ğŸ›ï¸</div>
        <h3>Pilih Produk</h3>
        <p>Pilih produk atau layanan yang Anda butuhkan dari katalog kami</p>
      </div>
      <div class="step-card">
        <div class="step-num">2</div>
        <div class="step-icon">ğŸ“</div>
        <h3>Isi Detail</h3>
        <p>Masukkan spesifikasi, alamat, dan detail pesanan Anda</p>
      </div>
      <div class="step-card">
        <div class="step-num">3</div>
        <div class="step-icon">ğŸ“¦</div>
        <h3>Cek Ongkir</h3>
        <p>Ongkos kirim otomatis dihitung berdasarkan jarak dari toko kami</p>
      </div>
      <div class="step-card">
        <div class="step-num">4</div>
        <div class="step-icon">ğŸ’³</div>
        <h3>Bayar</h3>
        <p>Bayar via QRIS semua bank atau COD saat barang tiba</p>
      </div>
      <div class="step-card">
        <div class="step-num">5</div>
        <div class="step-icon">âœ…</div>
        <h3>Terima & Nikmati</h3>
        <p>Pesanan dikirim atau dikerjakan oleh tim profesional kami</p>
      </div>
    </div>
  </div>
</section>

<!-- SHIPPING CALCULATOR -->
<section id="shipping" class="shipping-section">
  <div class="section-inner">
    <div class="section-header">
      <div class="section-tag">Pengiriman & COD</div>
      <h2>Cek Ongkos Kirim</h2>
      <p>Ongkir dihitung otomatis berdasarkan jarak dari toko kami ke alamat Anda</p>
    </div>
    
    <div class="shipping-calc">
      <h3>ğŸ—ºï¸ Kalkulator Ongkir</h3>
      <p>Masukkan alamat Anda untuk mengetahui biaya pengiriman</p>
      
      <div class="form-group">
        <label>Alamat Toko (Titik Asal)</label>
        <input type="text" value="Jl. Raya Industri No. 45, Jakarta Timur" disabled style="opacity:0.6;">
      </div>
      
      <div class="form-group">
        <label>Alamat Tujuan</label>
        <input type="text" id="dest-address" placeholder="Contoh: Jl. Sudirman No. 10, Jakarta Pusat" oninput="updateShipping()">
      </div>
      
      <div class="form-group">
        <label>Estimasi Jarak (km) â€” otomatis atau isi manual</label>
        <input type="range" id="dist-range" min="1" max="100" value="5" oninput="updateShippingFromRange(this.value)">
        <div style="display:flex;justify-content:space-between;font-size:12px;color:var(--text-muted);margin-top:4px;">
          <span>1 km</span>
          <span id="dist-label" style="color:var(--gold);font-weight:600;">5 km</span>
          <span>100 km</span>
        </div>
      </div>
      
      <div class="form-group">
        <label>Metode Pengiriman</label>
        <select id="shipping-method" onchange="updateShipping()">
          <option value="reguler">Reguler (1-3 hari) â€” Standar</option>
          <option value="express">Express (Hari ini/besok) â€” + Rp 10.000</option>
          <option value="same-day">Same Day (2-4 jam) â€” + Rp 20.000</option>
          <option value="cod">COD (Bayar di Tempat) â€” Standar + Rp 5.000</option>
        </select>
      </div>
      
      <button class="btn-primary" onclick="calcShipping()" style="width:100%;padding:14px;">
        ğŸ“ Gunakan Lokasi GPS Saya
      </button>
      
      <div class="shipping-result" id="shipping-result">
        <div class="shipping-result-row"><span>Jarak Estimasi</span><span id="sr-dist">â€”</span></div>
        <div class="shipping-result-row"><span>Biaya Dasar</span><span id="sr-base">â€”</span></div>
        <div class="shipping-result-row"><span>Tambahan Layanan</span><span id="sr-extra">â€”</span></div>
        <div class="shipping-result-row"><span>Estimasi Tiba</span><span id="sr-eta">â€”</span></div>
        <div class="shipping-result-row">
          <span>Total Ongkir</span>
          <span id="sr-total">â€”</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- PAYMENT -->
<section class="payment-section">
  <div class="section-inner">
    <div class="section-header">
      <div class="section-tag">Metode Pembayaran</div>
      <h2>Bayar dengan Cara Apapun</h2>
    </div>
    <div class="payment-features">
      <div class="payment-feat">
        <div class="pf-icon">ğŸ“±</div>
        <h3>QRIS â€” Semua Bank</h3>
        <p>Scan QR code dan bayar langsung dari aplikasi mobile banking atau dompet digital manapun.</p>
        <div class="bank-list">
          <span class="bank-chip">BCA</span>
          <span class="bank-chip">BRI</span>
          <span class="bank-chip">BNI</span>
          <span class="bank-chip">Mandiri</span>
          <span class="bank-chip">GoPay</span>
          <span class="bank-chip">OVO</span>
          <span class="bank-chip">DANA</span>
          <span class="bank-chip">ShopeePay</span>
        </div>
      </div>
      <div class="payment-feat">
        <div class="pf-icon">ğŸšš</div>
        <h3>COD â€” Bayar di Tempat</h3>
        <p>Bayar tunai saat barang tiba di tangan Anda. Tersedia di area jangkauan pengiriman.</p>
        <div class="bank-list">
          <span class="bank-chip">Tunai</span>
          <span class="bank-chip">Area Jakarta</span>
          <span class="bank-chip">Jabodetabek</span>
        </div>
      </div>
      <div class="payment-feat">
        <div class="pf-icon">ğŸ”’</div>
        <h3>Transaksi Aman</h3>
        <p>Semua pembayaran terenkripsi dan dilindungi. Bukti pembayaran dikirim via WhatsApp otomatis.</p>
        <div class="bank-list">
          <span class="bank-chip">SSL Secure</span>
          <span class="bank-chip">Terverifikasi</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- REVIEWS -->
<section id="reviews" class="reviews-section">
  <div class="section-inner">
    <div class="section-header">
      <div class="section-tag">Ulasan Pelanggan</div>
      <h2>Apa Kata Mereka?</h2>
      <p>Ulasan asli dari Google Maps terintegrasi langsung ke sini</p>
    </div>
    
    <div class="gmaps-badge">
      <div class="rating-big">4.9</div>
      <div class="stars-big">â˜…â˜…â˜…â˜…â˜…</div>
      <p>Berdasarkan <strong>247 ulasan</strong> di Google Maps<br>
      <a href="https://maps.google.com" target="_blank" style="color:var(--gold);">Lihat di Google Maps â†’</a></p>
    </div>
    
    <div class="reviews-grid" id="reviews-grid"></div>
    
    <div style="text-align:center;margin-top:32px;">
      <button class="btn-secondary" onclick="loadMoreReviews()" style="padding:12px 32px;">
        Lihat Semua Ulasan di Google Maps â†’
      </button>
    </div>
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="footer-inner">
    <div class="footer-grid">
      <div class="footer-brand">
        <div class="logo" style="margin-bottom:16px;">
          <div class="logo-icon">ğŸ–¨ï¸</div>
          <div>
            <div class="logo-text">PRIMA JAYA</div>
            <div class="logo-sub">Percetakan & Jasa Digital</div>
          </div>
        </div>
        <p>Solusi percetakan dan jasa instalasi terpercaya sejak 2015. Melayani seluruh wilayah Jabodetabek dengan kualitas terbaik.</p>
        <div style="margin-top:16px;display:flex;gap:12px;">
          <a href="#" style="color:var(--gold);">ğŸ“˜ Facebook</a>
          <a href="#" style="color:var(--gold);">ğŸ“· Instagram</a>
          <a href="#" style="color:var(--gold);">â–¶ï¸ YouTube</a>
        </div>
      </div>
      <div class="footer-col">
        <h4>Produk</h4>
        <ul>
          <li><a href="#">Undangan Pernikahan</a></li>
          <li><a href="#">Undangan Khitanan</a></li>
          <li><a href="#">Banner & Spanduk</a></li>
          <li><a href="#">Stiker & Label</a></li>
          <li><a href="#">Brosur & Flyer</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>Jasa</h4>
        <ul>
          <li><a href="#">Pasang AC</a></li>
          <li><a href="#">Service AC</a></li>
          <li><a href="#">Pasang CCTV</a></li>
          <li><a href="#">Maintenance CCTV</a></li>
          <li><a href="#">Konsultasi Gratis</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <h4>Kontak</h4>
        <ul>
          <li><a href="#">ğŸ“ Jl. Raya Industri No. 45</a></li>
          <li><a href="#">ğŸ“ (021) 8888-9999</a></li>
          <li><a href="#">ğŸ’¬ WhatsApp: 0812-3456-7890</a></li>
          <li><a href="#">ğŸ“§ info@primajaya.id</a></li>
          <li><a href="#">â° Senin-Sabtu 08:00-20:00</a></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <span>Â© 2024 Prima Jaya. Seluruh hak cipta dilindungi.</span>
      <span>Dibuat dengan â¤ï¸ untuk pelanggan terbaik kami</span>
    </div>
  </div>
</footer>

<!-- WHATSAPP FLOAT -->
<button class="wa-float" onclick="window.open('https://wa.me/6281234567890?text=Halo Prima Jaya, saya ingin memesan produk', '_blank')" title="Chat WhatsApp">ğŸ’¬</button>

<!-- CART SIDEBAR -->
<div class="overlay-bg" id="cart-overlay" onclick="toggleCart()"></div>
<div class="cart-sidebar" id="cart-sidebar">
  <div class="cart-header">
    <h2>ğŸ›’ Keranjang Belanja</h2>
    <button class="modal-close" onclick="toggleCart()">âœ•</button>
  </div>
  <div class="cart-items" id="cart-items">
    <div style="text-align:center;padding:60px 20px;color:var(--text-muted);">
      <div style="font-size:60px;margin-bottom:16px;">ğŸ›’</div>
      <p>Keranjang masih kosong</p>
    </div>
  </div>
  <div class="cart-footer" id="cart-footer" style="display:none;">
    <div class="cart-summary-row"><span>Subtotal</span><span id="cart-subtotal">Rp 0</span></div>
    <div class="cart-summary-row"><span>Ongkir</span><span id="cart-shipping-fee">Belum dihitung</span></div>
    <div class="cart-summary-row total"><span>Total</span><span id="cart-total">Rp 0</span></div>
    <button class="btn-primary" onclick="openCheckout()" style="width:100%;margin-top:16px;padding:14px;">
      Lanjut ke Pembayaran â†’
    </button>
  </div>
</div>

<!-- PRODUCT DETAIL MODAL -->
<div class="modal-overlay" id="detail-modal">
  <div class="modal" style="max-width:700px;">
    <div class="modal-header">
      <h2 id="detail-title">Detail Produk</h2>
      <button class="modal-close" onclick="closeModal('detail-modal')">âœ•</button>
    </div>
    <div class="modal-body" id="detail-body"></div>
  </div>
</div>

<!-- CHECKOUT MODAL -->
<div class="modal-overlay" id="checkout-modal">
  <div class="modal" style="max-width:640px;">
    <div class="modal-header">
      <h2>Checkout</h2>
      <button class="modal-close" onclick="closeModal('checkout-modal')">âœ•</button>
    </div>
    <div class="modal-body">
      <div class="checkout-steps">
        <div class="checkout-step active" id="cs-1">1. Data Diri</div>
        <div class="checkout-step" id="cs-2">2. Pengiriman</div>
        <div class="checkout-step" id="cs-3">3. Pembayaran</div>
        <div class="checkout-step" id="cs-4">4. Selesai</div>
      </div>
      
      <!-- STEP 1 -->
      <div id="checkout-step-1">
        <div class="form-row">
          <div class="form-group">
            <label>Nama Lengkap *</label>
            <input type="text" id="c-name" placeholder="John Doe">
          </div>
          <div class="form-group">
            <label>Nomor WhatsApp *</label>
            <input type="tel" id="c-phone" placeholder="08xxxxxxxxxx">
          </div>
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="c-email" placeholder="email@contoh.com">
        </div>
        <div class="form-group">
          <label>Alamat Lengkap *</label>
          <textarea id="c-address" placeholder="Jalan, No. Rumah, RT/RW, Kelurahan..."></textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Kota/Kabupaten</label>
            <input type="text" id="c-city" placeholder="Jakarta Timur">
          </div>
          <div class="form-group">
            <label>Kode Pos</label>
            <input type="text" id="c-zip" placeholder="13250">
          </div>
        </div>
        <div class="form-group">
          <label>Catatan Pesanan (opsional)</label>
          <textarea id="c-note" placeholder="Misal: warna pilihan, ukuran khusus, dll." style="min-height:70px;"></textarea>
        </div>
        <button class="btn-primary" onclick="nextCheckoutStep(2)" style="width:100%;padding:14px;">
          Lanjut ke Pengiriman â†’
        </button>
      </div>
      
      <!-- STEP 2 -->
      <div id="checkout-step-2" style="display:none;">
        <div class="form-group">
          <label>Metode Pengiriman</label>
          <select id="c-shipping" onchange="updateCheckoutShipping()">
            <option value="reguler">ğŸ“¦ Reguler (1-3 hari) â€” Rp 15.000</option>
            <option value="express">âš¡ Express (1 hari) â€” Rp 25.000</option>
            <option value="same-day">ğŸƒ Same Day (2-4 jam) â€” Rp 35.000</option>
            <option value="cod">ğŸ¤ COD Bayar di Tempat â€” Rp 20.000</option>
          </select>
        </div>
        <div id="checkout-items-summary" style="margin:20px 0;"></div>
        <div style="background:var(--dark4);border-radius:12px;padding:20px;">
          <div class="cart-summary-row"><span>Subtotal Produk</span><span id="c-subtotal2">â€”</span></div>
          <div class="cart-summary-row"><span>Ongkos Kirim</span><span id="c-ongkir">Rp 15.000</span></div>
          <div class="cart-summary-row total"><span>Total Bayar</span><span id="c-total2">â€”</span></div>
        </div>
        <div style="display:flex;gap:12px;margin-top:20px;">
          <button class="btn-secondary" onclick="nextCheckoutStep(1)" style="flex:1;padding:14px;">â† Kembali</button>
          <button class="btn-primary" onclick="nextCheckoutStep(3)" style="flex:2;padding:14px;">Lanjut ke Pembayaran â†’</button>
        </div>
      </div>
      
      <!-- STEP 3 -->
      <div id="checkout-step-3" style="display:none;">
        <p style="color:var(--text-muted);margin-bottom:16px;">Pilih metode pembayaran:</p>
        <div class="payment-methods">
          <div class="payment-method selected" onclick="selectPayment('qris', this)">
            <div class="pm-icon">ğŸ“±</div>
            <h4>QRIS</h4>
            <p>Semua Bank & E-Wallet</p>
          </div>
          <div class="payment-method" onclick="selectPayment('cod', this)">
            <div class="pm-icon">ğŸ’µ</div>
            <h4>COD</h4>
            <p>Bayar Saat Tiba</p>
          </div>
        </div>
        
        <div id="qris-section">
          <div class="qris-display">
            <p style="font-size:12px;color:var(--text-muted);margin-bottom:12px;">Scan QR Code untuk membayar</p>
            <div class="qris-code" id="qris-code-display">
              <div style="font-size:10px;color:#333;text-align:center;">
                <div style="font-weight:700;font-size:14px;margin-bottom:4px;">QRIS</div>
                <div id="qris-amount-display" style="font-size:12px;color:#555;">Loading...</div>
                <div style="margin-top:8px;font-size:9px;">Scan dengan aplikasi bank Anda</div>
              </div>
            </div>
            <div class="qris-info">
              <div>Total: <strong id="qris-amount">Rp 0</strong></div>
              <div style="margin-top:4px;font-size:12px;">Merchant: <strong>PRIMA JAYA</strong></div>
            </div>
            <div class="qris-bank">
              <span class="bank-badge">BCA</span>
              <span class="bank-badge">BRI</span>
              <span class="bank-badge">BNI</span>
              <span class="bank-badge">Mandiri</span>
              <span class="bank-badge">GoPay</span>
              <span class="bank-badge">OVO</span>
              <span class="bank-badge">DANA</span>
            </div>
          </div>
        </div>
        
        <div id="cod-section" style="display:none;padding:20px;background:var(--dark4);border-radius:12px;text-align:center;">
          <div style="font-size:48px;margin-bottom:12px;">ğŸ¤</div>
          <h3>COD â€” Bayar di Tempat</h3>
          <p style="color:var(--text-muted);margin-top:8px;">Siapkan uang tunai saat kurir tiba. Konfirmasi penerimaan sebelum membayar.</p>
        </div>
        
        <div style="display:flex;gap:12px;margin-top:20px;">
          <button class="btn-secondary" onclick="nextCheckoutStep(2)" style="flex:1;padding:14px;">â† Kembali</button>
          <button class="btn-primary" onclick="confirmOrder()" style="flex:2;padding:14px;">âœ… Konfirmasi Pesanan</button>
        </div>
      </div>
      
      <!-- STEP 4 -->
      <div id="checkout-step-4" style="display:none;text-align:center;padding:20px 0;">
        <div style="font-size:80px;margin-bottom:20px;">ğŸ‰</div>
        <h2 style="font-family:'Playfair Display',serif;font-size:28px;color:var(--gold);margin-bottom:12px;">Pesanan Berhasil!</h2>
        <p style="color:var(--text-muted);margin-bottom:8px;">Nomor Pesanan: <strong id="order-number" style="color:var(--gold);">#PJ000001</strong></p>
        <p style="color:var(--text-muted);margin-bottom:24px;">Konfirmasi akan dikirim ke WhatsApp Anda</p>
        <div style="background:var(--dark4);border-radius:12px;padding:20px;margin-bottom:24px;">
          <div class="order-progress">
            <div class="op-step done"><div class="op-circle">âœ“</div><p>Pesanan</p></div>
            <div class="op-line done"></div>
            <div class="op-step active"><div class="op-circle">âš™ï¸</div><p>Proses</p></div>
            <div class="op-line"></div>
            <div class="op-step"><div class="op-circle">ğŸ“¦</div><p>Kirim</p></div>
            <div class="op-line"></div>
            <div class="op-step"><div class="op-circle">âœ…</div><p>Selesai</p></div>
          </div>
        </div>
        <button class="btn-primary" onclick="closeModal('checkout-modal');clearCart();" style="padding:14px 32px;">
          Kembali Belanja
        </button>
      </div>
    </div>
  </div>
</div>

<!-- ADMIN LOGIN -->
<div class="admin-login" id="admin-login">
  <div class="admin-login-card">
    <div style="font-size:56px;margin-bottom:16px;">ğŸ”</div>
    <h2>Panel Admin</h2>
    <p>Masukkan kata sandi untuk mengakses admin panel</p>
    <div class="form-group" style="margin-bottom:20px;">
      <input type="password" id="admin-pass" placeholder="Kata Sandi Admin" onkeydown="if(event.key==='Enter')loginAdmin()">
    </div>
    <button class="btn-primary" onclick="loginAdmin()" style="width:100%;padding:14px;">Masuk â†’</button>
    <button class="btn-secondary" onclick="closeAdminLogin()" style="width:100%;margin-top:12px;padding:12px;">Batal</button>
    <p style="font-size:12px;color:var(--text-muted);margin-top:16px;">Default: admin123</p>
  </div>
</div>

<!-- ADMIN PANEL -->
<div class="admin-panel" id="admin-panel">
  <div class="admin-header">
    <div class="admin-header-inner">
      <div class="admin-title">âš™ï¸ PRIMA JAYA â€” Admin Panel</div>
      <div class="admin-nav">
        <button class="active" onclick="switchAdminTab('dashboard', this)">ğŸ“Š Dashboard</button>
        <button onclick="switchAdminTab('products', this)">ğŸ›ï¸ Produk</button>
        <button onclick="switchAdminTab('orders', this)">ğŸ“¦ Pesanan</button>
        <button onclick="switchAdminTab('shipping', this)">ğŸšš Ongkir</button>
        <button onclick="switchAdminTab('banner', this)">ğŸ“£ Etalase</button>
        <button onclick="switchAdminTab('settings', this)">ğŸ”§ Pengaturan</button>
      </div>
      <button onclick="exitAdmin()" style="padding:8px 16px;border-radius:8px;background:rgba(232,69,69,0.2);color:var(--accent);border:1px solid rgba(232,69,69,0.3);font-size:14px;font-weight:600;">
        Keluar
      </button>
    </div>
  </div>
  
  <div class="admin-body">
    
    <!-- DASHBOARD -->
    <div class="admin-section active" id="tab-dashboard">
      <div class="admin-cards">
        <div class="admin-card">
          <div class="ac-icon">ğŸ“¦</div>
          <h3 id="stat-orders">42</h3>
          <p>Pesanan Bulan Ini</p>
        </div>
        <div class="admin-card">
          <div class="ac-icon">ğŸ’°</div>
          <h3 id="stat-revenue">Rp 14.2 Jt</h3>
          <p>Pendapatan Bulan Ini</p>
        </div>
        <div class="admin-card">
          <div class="ac-icon">ğŸ›ï¸</div>
          <h3 id="stat-products">12</h3>
          <p>Total Produk Aktif</p>
        </div>
        <div class="admin-card">
          <div class="ac-icon">â­</div>
          <h3>4.9</h3>
          <p>Rating Google Maps</p>
        </div>
      </div>
      
      <div class="admin-form">
        <h3>ğŸ“‹ Pesanan Terbaru</h3>
        <div class="table-wrap">
          <table id="orders-table">
            <tr><th>#</th><th>Pelanggan</th><th>Produk</th><th>Total</th><th>Metode Bayar</th><th>Status</th><th>Aksi</th></tr>
          </table>
        </div>
      </div>
    </div>
    
    <!-- PRODUCTS TAB -->
    <div class="admin-section" id="tab-products">
      <button class="btn-add-product" onclick="showAddProductForm()">+ Tambah Produk Baru</button>
      
      <div class="admin-form" id="product-form" style="display:none;margin-bottom:24px;">
        <h3 id="pf-title">â• Tambah Produk Baru</h3>
        <input type="hidden" id="pf-id">
        <div class="form-row">
          <div class="form-group">
            <label>Nama Produk *</label>
            <input type="text" id="pf-name" placeholder="Nama produk">
          </div>
          <div class="form-group">
            <label>Kategori *</label>
            <select id="pf-cat">
              <option value="percetakan">Percetakan</option>
              <option value="banner">Banner</option>
              <option value="ac">Jasa AC</option>
              <option value="cctv">CCTV</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Harga (Rp) *</label>
            <input type="number" id="pf-price" placeholder="50000">
          </div>
          <div class="form-group">
            <label>Harga Coret (Rp) â€” opsional</label>
            <input type="number" id="pf-old-price" placeholder="75000">
          </div>
        </div>
        <div class="form-group">
          <label>Deskripsi *</label>
          <textarea id="pf-desc" placeholder="Deskripsi produk..."></textarea>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Emoji/Icon</label>
            <input type="text" id="pf-icon" placeholder="ğŸ’Œ">
          </div>
          <div class="form-group">
            <label>Badge Label</label>
            <input type="text" id="pf-badge" placeholder="Terlaris">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Satuan</label>
            <input type="text" id="pf-unit" placeholder="per lembar / per unit / per titik">
          </div>
          <div class="form-group">
            <label>Warna Latar</label>
            <input type="text" id="pf-bg" placeholder="linear-gradient(135deg,#1a0a3c,#2d1b69)">
          </div>
        </div>
        <div class="switch-wrap" style="margin-bottom:20px;">
          <div class="switch on" id="pf-active-switch" onclick="toggleSwitch(this)"><div class="switch-thumb"></div></div>
          <span>Produk Aktif / Ditampilkan</span>
        </div>
        <div style="display:flex;gap:12px;">
          <button class="btn-primary" onclick="saveProduct()" style="padding:12px 24px;">Simpan Produk</button>
          <button class="btn-secondary" onclick="cancelProductForm()" style="padding:12px 24px;">Batal</button>
        </div>
      </div>
      
      <div class="admin-form">
        <h3>ğŸ“¦ Daftar Produk</h3>
        <div class="table-wrap">
          <table id="products-table">
            <tr><th>Icon</th><th>Nama</th><th>Kategori</th><th>Harga</th><th>Status</th><th>Aksi</th></tr>
          </table>
        </div>
      </div>
    </div>
    
    <!-- ORDERS TAB -->
    <div class="admin-section" id="tab-orders">
      <div class="admin-form">
        <h3>ğŸ“¦ Manajemen Pesanan</h3>
        <div class="table-wrap">
          <table id="orders-full-table">
            <tr><th>#Order</th><th>Pelanggan</th><th>WA</th><th>Produk</th><th>Total</th><th>Bayar</th><th>Status</th><th>Aksi</th></tr>
          </table>
        </div>
      </div>
    </div>
    
    <!-- SHIPPING TAB -->
    <div class="admin-section" id="tab-shipping">
      <div class="admin-form">
        <h3>ğŸšš Pengaturan Ongkos Kirim</h3>
        <p style="color:var(--text-muted);margin-bottom:24px;">Atur biaya ongkir berdasarkan zona jarak dari toko</p>
        <div id="shipping-zones"></div>
        <button onclick="addShippingZone()" class="btn-secondary" style="margin-top:16px;padding:10px 20px;">+ Tambah Zona</button>
        <div style="margin-top:24px;padding-top:24px;border-top:1px solid var(--border);">
          <h3 style="margin-bottom:16px;">Pengaturan Tambahan</h3>
          <div class="form-row">
            <div class="form-group">
              <label>Biaya COD (Rp)</label>
              <input type="number" id="cod-fee" value="5000">
            </div>
            <div class="form-group">
              <label>Biaya Express Tambahan (Rp)</label>
              <input type="number" id="express-fee" value="10000">
            </div>
          </div>
          <div class="form-row">
            <div class="form-group">
              <label>Biaya Same Day Tambahan (Rp)</label>
              <input type="number" id="sameday-fee" value="20000">
            </div>
            <div class="form-group">
              <label>Minimal Belanja Gratis Ongkir (Rp)</label>
              <input type="number" id="free-shipping-min" value="500000">
            </div>
          </div>
          <button class="btn-primary" onclick="saveShippingSettings()" style="padding:12px 24px;">Simpan Pengaturan</button>
        </div>
      </div>
    </div>
    
    <!-- BANNER/ETALASE TAB -->
    <div class="admin-section" id="tab-banner">
      <div class="admin-form" style="margin-bottom:24px;">
        <h3>ğŸ“£ Pengaturan Etalase Utama</h3>
        <div class="form-group">
          <label>Judul Utama Hero</label>
          <input type="text" id="hero-title-edit" value="Solusi Cetak & Jasa Digital Terbaik">
        </div>
        <div class="form-group">
          <label>Subjudul Hero</label>
          <textarea id="hero-desc-edit" style="min-height:80px;">Percetakan undangan, banner, spanduk premium â€” plus jasa pemasangan AC & CCTV profesional.</textarea>
        </div>
        <div class="form-group">
          <label>Teks Promo Banner</label>
          <input type="text" id="promo-text-edit" value="ğŸ‰ Promo Spesial Bulan Ini! Diskon 15% untuk pemesanan undangan di atas 100 lembar">
        </div>
        <div class="form-group">
          <label>Kode Promo</label>
          <input type="text" id="promo-code-edit" value="PRIMA15">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Statistik 1 (Angka)</label>
            <input type="text" id="stat1-num" value="2.4K+">
          </div>
          <div class="form-group">
            <label>Statistik 1 (Label)</label>
            <input type="text" id="stat1-lbl" value="Pelanggan Puas">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Statistik 2 (Angka)</label>
            <input type="text" id="stat2-num" value="4.9â˜…">
          </div>
          <div class="form-group">
            <label>Statistik 2 (Label)</label>
            <input type="text" id="stat2-lbl" value="Rating Google">
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Statistik 3 (Angka)</label>
            <input type="text" id="stat3-num" value="8+">
          </div>
          <div class="form-group">
            <label>Statistik 3 (Label)</label>
            <input type="text" id="stat3-lbl" value="Tahun Berpengalaman">
          </div>
        </div>
        <button class="btn-primary" onclick="saveEtalaseSettings()" style="padding:12px 24px;">Simpan & Update Etalase</button>
      </div>
      
      <div class="admin-form">
        <h3>ğŸ“¢ Ticker Marquee Banner Strip</h3>
        <div id="ticker-items"></div>
        <button onclick="addTickerItem()" class="btn-secondary" style="margin-top:12px;padding:10px 20px;">+ Tambah Item</button>
        <button onclick="saveTickerItems()" class="btn-primary" style="margin-top:12px;margin-left:12px;padding:10px 20px;">Simpan Ticker</button>
      </div>
    </div>
    
    <!-- SETTINGS TAB -->
    <div class="admin-section" id="tab-settings">
      <div class="admin-form" style="margin-bottom:24px;">
        <h3>ğŸ”‘ Ganti Kata Sandi Admin</h3>
        <div class="form-row">
          <div class="form-group">
            <label>Kata Sandi Lama</label>
            <input type="password" id="old-pass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
          </div>
          <div class="form-group">
            <label>Kata Sandi Baru</label>
            <input type="password" id="new-pass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
          </div>
        </div>
        <div class="form-group">
          <label>Konfirmasi Kata Sandi Baru</label>
          <input type="password" id="confirm-pass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" style="max-width:300px;">
        </div>
        <button class="btn-primary" onclick="changePassword()" style="padding:12px 24px;">Ganti Kata Sandi</button>
      </div>
      
      <div class="admin-form" style="margin-bottom:24px;">
        <h3>ğŸª Informasi Toko</h3>
        <div class="form-row">
          <div class="form-group">
            <label>Nama Toko</label>
            <input type="text" id="store-name" value="Prima Jaya">
          </div>
          <div class="form-group">
            <label>Nomor WhatsApp</label>
            <input type="text" id="store-wa" value="6281234567890">
          </div>
        </div>
        <div class="form-group">
          <label>Alamat Toko (Titik Asal Pengiriman)</label>
          <input type="text" id="store-address" value="Jl. Raya Industri No. 45, Jakarta Timur">
        </div>
        <div class="form-row">
          <div class="form-group">
            <label>Latitude Toko</label>
            <input type="text" id="store-lat" value="-6.2088">
          </div>
          <div class="form-group">
            <label>Longitude Toko</label>
            <input type="text" id="store-lng" value="106.8456">
          </div>
        </div>
        <div class="form-group">
          <label>Google Maps Place ID (untuk integrasi review)</label>
          <input type="text" id="gmaps-place-id" placeholder="ChIJ...">
        </div>
        <button class="btn-primary" onclick="saveStoreSettings()" style="padding:12px 24px;">Simpan Pengaturan Toko</button>
      </div>
      
      <div class="admin-form">
        <h3>ğŸ“Š Info Sistem</h3>
        <div class="spec-grid">
          <div class="spec-item"><label>Versi Sistem</label><p>Prima Jaya v1.0</p></div>
          <div class="spec-item"><label>Total Produk</label><p id="sys-products">â€”</p></div>
          <div class="spec-item"><label>Total Pesanan</label><p id="sys-orders">â€”</p></div>
          <div class="spec-item"><label>Penyimpanan</label><p>localStorage</p></div>
        </div>
        <button onclick="exportData()" class="btn-secondary" style="margin-top:16px;padding:10px 20px;">ğŸ“¤ Export Data (JSON)</button>
        <button onclick="if(confirm('Reset semua data?'))resetAllData()" class="btn-del" style="margin-top:16px;margin-left:12px;padding:10px 20px;">ğŸ—‘ï¸ Reset Semua Data</button>
      </div>
    </div>
    
  </div>
</div>

<!-- TOAST -->
<div class="toast" id="toast">
  <span class="toast-icon" id="toast-icon">âœ…</span>
  <span id="toast-msg">Berhasil!</span>
</div>

<script>
// ============================
// DATA MANAGEMENT
// ============================
const DB = {
  get: (key) => { try { return JSON.parse(localStorage.getItem(key)); } catch { return null; } },
  set: (key, val) => localStorage.setItem(key, JSON.stringify(val)),
};

// DEFAULT DATA
const DEFAULT_PRODUCTS = [
  { id:1, name:'Undangan Pernikahan Premium', cat:'percetakan', price:3500, oldPrice:5000, icon:'ğŸ’Œ', badge:'Terlaris', unit:'per lembar', bg:'linear-gradient(135deg,#1a0a3c,#2d1b69)', desc:'Undangan pernikahan desain eksklusif, bahan art paper 260gr, cetak full-color + laminasi doff. Minimal order 50 lembar.', active:true },
  { id:2, name:'Undangan Khitanan & Aqiqah', cat:'percetakan', price:2500, oldPrice:3500, icon:'ğŸ•Œ', badge:'', unit:'per lembar', bg:'linear-gradient(135deg,#0a2c1a,#1b4d2d)', desc:'Undangan khitanan dan aqiqah dengan motif islami. Tersedia berbagai pilihan desain.', active:true },
  { id:3, name:'Banner/Spanduk Outdoor', cat:'banner', price:35000, oldPrice:50000, icon:'ğŸ·ï¸', badge:'', unit:'per mÂ²', bg:'linear-gradient(135deg,#1a1a0a,#3d3d00)', desc:'Cetak banner/spanduk outdoor resolusi tinggi, bahan flexi Korea 340gsm, tahan sinar UV dan air hujan.', active:true },
  { id:4, name:'Banner Roll-Up Premium', cat:'banner', price:185000, oldPrice:250000, icon:'ğŸ¯', badge:'Promo', unit:'per unit', bg:'linear-gradient(135deg,#0a1a2c,#003366)', desc:'Roll-up banner untuk pameran dan event. Ukuran 60x160cm, stand aluminium termasuk.', active:true },
  { id:5, name:'Stiker Custom Cutting', cat:'percetakan', price:25000, oldPrice:0, icon:'ğŸ¨', badge:'Baru', unit:'per lembar A4', bg:'linear-gradient(135deg,#1a0a0a,#3d0000)', desc:'Stiker cutting custom untuk branding produk, stiker laptop, kendaraan, dll. Bahan vinyl waterproof.', active:true },
  { id:6, name:'Brosur & Flyer', cat:'percetakan', price:500, oldPrice:750, icon:'ğŸ“„', badge:'', unit:'per lembar', bg:'linear-gradient(135deg,#0a1a1a,#004433)', desc:'Cetak brosur lipat 3 atau flyer promosi. Art paper 150gr, full color. Minimal order 100 lembar.', active:true },
  { id:7, name:'Pasang AC Split Baru', cat:'ac', price:350000, oldPrice:500000, icon:'â„ï¸', badge:'Garansi', unit:'per unit', bg:'linear-gradient(135deg,#001a33,#003366)', desc:'Jasa pemasangan AC split baru semua merek. Termasuk instalasi pipa 3m, bracket, dan pengujian.', active:true },
  { id:8, name:'Service & Cuci AC', cat:'ac', price:150000, oldPrice:200000, icon:'ğŸ”§', badge:'', unit:'per unit', bg:'linear-gradient(135deg,#001a1a,#004455)', desc:'Service dan cuci AC lengkap: bersihkan evaporator, kondensor, cek freon, dan uji performa.', active:true },
  { id:9, name:'Pasang CCTV IP Camera', cat:'cctv', price:450000, oldPrice:600000, icon:'ğŸ“·', badge:'', unit:'per titik', bg:'linear-gradient(135deg,#0a0a1a,#1a1a4d)', desc:'Pasang CCTV IP Camera 2MP/4MP/8MP. Termasuk instalasi kabel, konfigurasi DVR/NVR, dan remote view.', active:true },
  { id:10, name:'Paket CCTV 4 Kamera', cat:'cctv', price:2800000, oldPrice:3500000, icon:'ğŸ¥', badge:'Paket Hemat', unit:'paket', bg:'linear-gradient(135deg,#0f0f1a,#2a2a5e)', desc:'Paket lengkap 4 kamera CCTV indoor/outdoor + DVR 4CH + HDD 500GB. Garansi alat 1 tahun.', active:true },
  { id:11, name:'X-Banner Event', cat:'banner', price:95000, oldPrice:130000, icon:'ğŸª', badge:'', unit:'per unit', bg:'linear-gradient(135deg,#1a0a2c,#330066)', desc:'X-Banner ukuran 60x160cm untuk event, seminar, pameran. Termasuk tiang X, cetak full-color.', active:true },
  { id:12, name:'Nota & Kuitansi Custom', cat:'percetakan', price:45000, oldPrice:0, icon:'ğŸ§¾', badge:'', unit:'per buku (50 lembar)', bg:'linear-gradient(135deg,#1a1a0a,#4d4d00)', desc:'Nota 2-3 ply (rangkap) custom dengan logo dan data perusahaan Anda. Kertas NCR berkualitas.', active:true },
];

const DEFAULT_ORDERS = [
  { id:'PJ000001', name:'Budi Santoso', phone:'081234567890', products:'Undangan Pernikahan x100', total:350000, payment:'QRIS', status:'Selesai', date:'2024-01-15' },
  { id:'PJ000002', name:'Siti Rahayu', phone:'082345678901', products:'Banner Outdoor 2mÂ²', total:95000, payment:'COD', status:'Proses', date:'2024-01-16' },
  { id:'PJ000003', name:'Ahmad Fauzi', phone:'083456789012', products:'Pasang AC Split x2', total:730000, payment:'QRIS', status:'Pengiriman', date:'2024-01-17' },
];

const DEFAULT_REVIEWS = [
  { name:'Budi Santoso', initial:'B', rating:5, text:'Hasil cetakan undangan pernikahan saya luar biasa! Kualitas kertas premium, desainnya elegan, dan tepat waktu. Banyak tamu memuji undangannya.', date:'2 minggu lalu', source:'Google Maps' },
  { name:'Siti Rahayu', initial:'S', rating:5, text:'Banner untuk acara perusahaan kami terlihat sangat profesional. Warnanya tajam dan materialnya tebal. Pengerjaan cepat sekali, pesan hari ini besok sudah jadi!', date:'1 bulan lalu', source:'Google Maps' },
  { name:'Ahmad Fauzi', initial:'A', rating:5, text:'Sudah langganan pasang AC di sini sejak 2020. Teknisinya berpengalaman, rapih kerjanya, dan harganya bersaing. Garansi 1 tahun juga ditepati.', date:'3 minggu lalu', source:'Google Maps' },
  { name:'Dewi Pratiwi', initial:'D', rating:5, text:'CCTV 4 kamera yang dipasang berfungsi sempurna. Bisa pantau rumah dari HP kapanpun. Tim instalasi sangat profesional dan tidak berantakan.', date:'1 bulan lalu', source:'Google Maps' },
  { name:'Rizki Maulana', initial:'R', rating:4, text:'Stiker cutting-nya bagus dan presisi. Tapi agak lama responnya waktu chat. Overall produk memuaskan dan harga wajar.', date:'2 bulan lalu', source:'Google Maps' },
  { name:'Hendra Wijaya', initial:'H', rating:5, text:'Puas banget dengan pelayanannya! Brosur untuk launching produk kami terlihat mewah. Admin ramah dan membantu revisi desain sampai sesuai keinginan.', date:'3 minggu lalu', source:'Google Maps' },
];

const DEFAULT_SHIPPING_ZONES = [
  { km_min:0, km_max:5, price:10000 },
  { km_min:5, km_max:15, price:20000 },
  { km_min:15, km_max:30, price:35000 },
  { km_min:30, km_max:50, price:50000 },
  { km_min:50, km_max:100, price:80000 },
];

// Initialize data
function initData() {
  if (!DB.get('products')) DB.set('products', DEFAULT_PRODUCTS);
  if (!DB.get('orders')) DB.set('orders', DEFAULT_ORDERS);
  if (!DB.get('reviews')) DB.set('reviews', DEFAULT_REVIEWS);
  if (!DB.get('shipping_zones')) DB.set('shipping_zones', DEFAULT_SHIPPING_ZONES);
  if (!DB.get('admin_pass')) DB.set('admin_pass', 'admin123');
  if (!DB.get('store_settings')) DB.set('store_settings', {
    name:'Prima Jaya', wa:'6281234567890',
    address:'Jl. Raya Industri No. 45, Jakarta Timur',
    lat:-6.2088, lng:106.8456
  });
}

// ============================
// PRODUCTS
// ============================
let currentFilter = 'all';

function renderProducts() {
  const products = DB.get('products') || [];
  const grid = document.getElementById('products-grid');
  const filtered = currentFilter === 'all' ? products : products.filter(p => p.cat === currentFilter);
  const active = filtered.filter(p => p.active);
  
  if (!active.length) {
    grid.innerHTML = '<p style="text-align:center;color:var(--text-muted);padding:40px;grid-column:1/-1;">Tidak ada produk ditemukan.</p>';
    return;
  }
  
  grid.innerHTML = active.map(p => `
    <div class="product-card" onclick="showDetail(${p.id})">
      <div class="product-img" style="background:${p.bg}">
        <span>${p.icon}</span>
        ${p.badge ? `<div class="product-badge ${p.badge==='Baru'?'new':''}">${p.badge}</div>` : ''}
      </div>
      <div class="product-info">
        <div class="product-name">${p.name}</div>
        <div class="product-desc">${p.desc.substring(0,80)}...</div>
        <div class="product-price">
          ${formatRp(p.price)}<span class="old">${p.unit}</span>
          ${p.oldPrice ? `<span class="old">${formatRp(p.oldPrice)}</span>` : ''}
        </div>
        <div class="product-actions">
          <button class="btn-add-cart" onclick="event.stopPropagation();addToCart(${p.id})">+ Keranjang</button>
          <button class="btn-detail" onclick="event.stopPropagation();showDetail(${p.id})">Detail</button>
        </div>
      </div>
    </div>
  `).join('');
}

function filterProducts(cat, btn) {
  currentFilter = cat;
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderProducts();
}

function showDetail(id) {
  const products = DB.get('products') || [];
  const p = products.find(x => x.id === id);
  if (!p) return;
  
  document.getElementById('detail-title').textContent = p.name;
  document.getElementById('detail-body').innerHTML = `
    <div class="detail-gallery" style="background:${p.bg}">${p.icon}</div>
    <div class="spec-grid">
      <div class="spec-item"><label>Kategori</label><p>${p.cat.charAt(0).toUpperCase()+p.cat.slice(1)}</p></div>
      <div class="spec-item"><label>Satuan</label><p>${p.unit}</p></div>
    </div>
    <div class="detail-price-row">
      <span class="detail-price">${formatRp(p.price)}</span>
      ${p.oldPrice ? `<span style="color:var(--text-muted);text-decoration:line-through;">${formatRp(p.oldPrice)}</span>` : ''}
    </div>
    <p style="color:var(--text-muted);line-height:1.7;">${p.desc}</p>
    <div class="qty-control">
      <span style="font-size:14px;color:var(--text-muted);">Jumlah:</span>
      <button class="qty-btn" onclick="changeQty(-1)">âˆ’</button>
      <span class="qty-num" id="modal-qty">1</span>
      <button class="qty-btn" onclick="changeQty(1)">+</button>
    </div>
    <div style="display:flex;gap:12px;margin-top:8px;">
      <button class="btn-primary" onclick="addToCartFromDetail(${p.id})" style="flex:2;padding:14px;">+ Tambah ke Keranjang</button>
      <button class="btn-secondary" onclick="closeModal('detail-modal')" style="flex:1;padding:14px;">Tutup</button>
    </div>
  `;
  openModal('detail-modal');
}

let modalQty = 1;
function changeQty(delta) {
  modalQty = Math.max(1, modalQty + delta);
  document.getElementById('modal-qty').textContent = modalQty;
}
function addToCartFromDetail(id) {
  for (let i = 0; i < modalQty; i++) addToCart(id, false);
  modalQty = 1;
  closeModal('detail-modal');
  showToast(`Ditambahkan ke keranjang âœ“`, 'success');
}

// ============================
// CART
// ============================
let cart = [];

function addToCart(id, notify = true) {
  const products = DB.get('products') || [];
  const p = products.find(x => x.id === id);
  if (!p) return;
  const existing = cart.find(c => c.id === id);
  if (existing) existing.qty++;
  else cart.push({ ...p, qty: 1 });
  updateCartUI();
  if (notify) showToast(`${p.icon} ${p.name} ditambahkan!`, 'success');
}

function removeFromCart(id) {
  cart = cart.filter(c => c.id !== id);
  updateCartUI();
}

function updateCartUI() {
  const total = cart.reduce((s, c) => s + c.qty, 0);
  document.getElementById('cart-badge').textContent = total;
  
  const itemsEl = document.getElementById('cart-items');
  const footerEl = document.getElementById('cart-footer');
  
  if (!cart.length) {
    itemsEl.innerHTML = '<div style="text-align:center;padding:60px 20px;color:var(--text-muted);"><div style="font-size:60px;margin-bottom:16px;">ğŸ›’</div><p>Keranjang masih kosong</p></div>';
    footerEl.style.display = 'none';
    return;
  }
  
  itemsEl.innerHTML = cart.map(c => `
    <div class="cart-item">
      <div class="cart-item-icon">${c.icon}</div>
      <div class="cart-item-info">
        <h4>${c.name}</h4>
        <p>${c.unit}</p>
        <div class="cart-item-price">${formatRp(c.price * c.qty)} (${c.qty}x)</div>
      </div>
      <button class="btn-remove" onclick="removeFromCart(${c.id})">âœ•</button>
    </div>
  `).join('');
  
  const subtotal = cart.reduce((s, c) => s + c.price * c.qty, 0);
  document.getElementById('cart-subtotal').textContent = formatRp(subtotal);
  document.getElementById('cart-shipping-fee').textContent = 'Belum dihitung';
  document.getElementById('cart-total').textContent = formatRp(subtotal);
  footerEl.style.display = 'block';
}

function toggleCart() {
  document.getElementById('cart-sidebar').classList.toggle('show');
  document.getElementById('cart-overlay').classList.toggle('show');
}

function clearCart() {
  cart = [];
  updateCartUI();
}

// ============================
// SHIPPING CALCULATOR
// ============================
function updateShippingFromRange(val) {
  document.getElementById('dist-label').textContent = val + ' km';
  updateShipping();
}

function updateShipping() {
  const km = parseInt(document.getElementById('dist-range').value);
  calcShippingCost(km);
}

function calcShipping() {
  if (navigator.geolocation) {
    showToast('ğŸ“ Mengambil lokasi GPS Anda...', 'success');
    navigator.geolocation.getCurrentPosition(pos => {
      const storeLat = -6.2088, storeLng = 106.8456;
      const dist = haversine(storeLat, storeLng, pos.coords.latitude, pos.coords.longitude);
      const km = Math.max(1, Math.round(dist));
      document.getElementById('dist-range').value = km;
      document.getElementById('dist-label').textContent = km + ' km';
      calcShippingCost(km);
      showToast(`ğŸ“ Jarak: ${km} km dari toko`, 'success');
    }, () => {
      showToast('âŒ GPS tidak tersedia, gunakan slider', 'error');
    });
  }
}

function haversine(lat1, lng1, lat2, lng2) {
  const R = 6371;
  const dLat = (lat2 - lat1) * Math.PI / 180;
  const dLng = (lng2 - lng1) * Math.PI / 180;
  const a = Math.sin(dLat/2)**2 + Math.cos(lat1*Math.PI/180) * Math.cos(lat2*Math.PI/180) * Math.sin(dLng/2)**2;
  return R * 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
}

function calcShippingCost(km) {
  const zones = DB.get('shipping_zones') || DEFAULT_SHIPPING_ZONES;
  const method = document.getElementById('shipping-method').value;
  let base = 0;
  for (const z of zones) {
    if (km >= z.km_min && km <= z.km_max) { base = z.price; break; }
  }
  if (!base) base = zones[zones.length - 1].price;
  
  let extra = 0, eta = '1-3 hari kerja';
  if (method === 'express') { extra = 10000; eta = '1 hari kerja'; }
  else if (method === 'same-day') { extra = 20000; eta = '2-4 jam'; }
  else if (method === 'cod') { extra = 5000; eta = '1-3 hari (COD)'; }
  
  const total = base + extra;
  
  document.getElementById('sr-dist').textContent = km + ' km';
  document.getElementById('sr-base').textContent = formatRp(base);
  document.getElementById('sr-extra').textContent = formatRp(extra);
  document.getElementById('sr-eta').textContent = eta;
  document.getElementById('sr-total').textContent = formatRp(total);
  document.getElementById('shipping-result').classList.add('show');
}

// ============================
// REVIEWS
// ============================
function renderReviews() {
  const reviews = DB.get('reviews') || [];
  const grid = document.getElementById('reviews-grid');
  grid.innerHTML = reviews.slice(0, 6).map(r => `
    <div class="review-card">
      <div class="review-header">
        <div class="review-avatar">${r.initial}</div>
        <div class="review-meta">
          <h4>${r.name}</h4>
          <span>${r.date}</span>
        </div>
      </div>
      <div class="review-stars">${'â˜…'.repeat(r.rating)}${'â˜†'.repeat(5-r.rating)}</div>
      <div class="review-text">${r.text}</div>
      <div class="review-source">
        <span>ğŸ—ºï¸</span> <span>${r.source}</span>
      </div>
    </div>
  `).join('');
}

function loadMoreReviews() {
  window.open('https://maps.google.com', '_blank');
}

// ============================
// CHECKOUT
// ============================
let checkoutStep = 1;
let selectedPayment = 'qris';
let checkoutShippingFee = 15000;

function openCheckout() {
  if (!cart.length) { showToast('Keranjang kosong!', 'error'); return; }
  toggleCart();
  checkoutStep = 1;
  updateCheckoutUI();
  openModal('checkout-modal');
}

function nextCheckoutStep(step) {
  if (step === 2) {
    if (!document.getElementById('c-name').value || !document.getElementById('c-phone').value || !document.getElementById('c-address').value) {
      showToast('Isi data diri terlebih dahulu!', 'error'); return;
    }
    updateCheckoutSummary();
  }
  if (step === 3) {
    const amt = cart.reduce((s, c) => s + c.price * c.qty, 0) + checkoutShippingFee;
    document.getElementById('qris-amount').textContent = formatRp(amt);
    document.getElementById('qris-amount-display').textContent = 'Rp ' + amt.toLocaleString('id-ID');
  }
  checkoutStep = step;
  updateCheckoutUI();
}

function updateCheckoutUI() {
  for (let i = 1; i <= 4; i++) {
    const el = document.getElementById(`checkout-step-${i}`);
    const cs = document.getElementById(`cs-${i}`);
    el.style.display = i === checkoutStep ? 'block' : 'none';
    cs.className = 'checkout-step' + (i < checkoutStep ? ' done' : i === checkoutStep ? ' active' : '');
  }
}

function updateCheckoutSummary() {
  const subtotal = cart.reduce((s, c) => s + c.price * c.qty, 0);
  checkoutShippingFee = {reguler:15000, express:25000, 'same-day':35000, cod:20000}[document.getElementById('c-shipping').value] || 15000;
  
  document.getElementById('checkout-items-summary').innerHTML = cart.map(c => `
    <div class="order-item">
      <span>${c.icon} ${c.name} x${c.qty}</span>
      <span>${formatRp(c.price * c.qty)}</span>
    </div>
  `).join('');
  
  document.getElementById('c-subtotal2').textContent = formatRp(subtotal);
  document.getElementById('c-ongkir').textContent = formatRp(checkoutShippingFee);
  document.getElementById('c-total2').textContent = formatRp(subtotal + checkoutShippingFee);
}

function updateCheckoutShipping() {
  updateCheckoutSummary();
}

function selectPayment(type, el) {
  selectedPayment = type;
  document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
  el.classList.add('selected');
  document.getElementById('qris-section').style.display = type === 'qris' ? 'block' : 'none';
  document.getElementById('cod-section').style.display = type === 'cod' ? 'block' : 'none';
}

function confirmOrder() {
  const orders = DB.get('orders') || [];
  const storeSettings = DB.get('store_settings') || {};
  const waNumber = storeSettings.wa || '6281234567890';

  const name    = document.getElementById('c-name').value;
  const phone   = document.getElementById('c-phone').value;
  const email   = document.getElementById('c-email').value;
  const address = document.getElementById('c-address').value;
  const city    = document.getElementById('c-city').value;
  const zip     = document.getElementById('c-zip').value;
  const note    = document.getElementById('c-note').value;
  const shippingMethod = document.getElementById('c-shipping');
  const shippingLabel  = shippingMethod ? shippingMethod.options[shippingMethod.selectedIndex].text : 'Reguler';
  const subtotal = cart.reduce((s, c) => s + c.price * c.qty, 0);
  const total    = subtotal + checkoutShippingFee;

  const orderId = 'PJ' + String(orders.length + 1).padStart(6, '0');

  // Build WhatsApp message
  const itemLines = cart.map(c =>
    `  â€¢ ${c.icon} ${c.name} x${c.qty} = ${formatRp(c.price * c.qty)}`
  ).join('\n');

  const payLabel = selectedPayment === 'qris' ? 'ğŸ’³ QRIS (Scan QR)' : 'ğŸ¤ COD (Bayar di Tempat)';

  const msg =
`ğŸ›’ *PESANAN BARU â€” PRIMA JAYA*
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ”– *No. Pesanan:* #${orderId}
ğŸ“… *Tanggal:* ${new Date().toLocaleDateString('id-ID', {day:'2-digit', month:'long', year:'numeric'})}

ğŸ‘¤ *DATA PEMBELI*
Nama    : ${name}
WA/HP   : ${phone}${email ? '\nEmail   : ' + email : ''}
Alamat  : ${address}${city ? '\nKota    : ' + city : ''}${zip ? '\nKode Pos: ' + zip : ''}

ğŸ§¾ *DETAIL PESANAN*
${itemLines}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’° Subtotal    : ${formatRp(subtotal)}
ğŸšš Ongkos Kirim: ${formatRp(checkoutShippingFee)} (${shippingLabel})
âœ… *TOTAL BAYAR : ${formatRp(total)}*
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ’³ *Pembayaran :* ${payLabel}
${note ? 'ğŸ“ *Catatan   :* ' + note : ''}

Mohon segera dikonfirmasi. Terima kasih! ğŸ™`;

  // Save order to DB
  const newOrder = {
    id: orderId,
    name, phone,
    products: cart.map(c => `${c.name} x${c.qty}`).join(', '),
    total, payment: selectedPayment.toUpperCase(),
    status: 'Menunggu',
    date: new Date().toISOString().split('T')[0]
  };
  orders.unshift(newOrder);
  DB.set('orders', orders);

  document.getElementById('order-number').textContent = '#' + orderId;
  nextCheckoutStep(4);
  showToast('ğŸ‰ Pesanan berhasil! Membuka WhatsApp...', 'success');

  // Open WhatsApp after short delay so user sees step 4
  setTimeout(() => {
    const waUrl = `https://wa.me/${waNumber}?text=${encodeURIComponent(msg)}`;
    window.open(waUrl, '_blank');
  }, 800);
}

// ============================
// ADMIN
// ============================
function showAdminLogin() {
  document.getElementById('admin-login').classList.add('show');
  document.getElementById('admin-pass').value = '';
  setTimeout(() => document.getElementById('admin-pass').focus(), 100);
}

function closeAdminLogin() {
  document.getElementById('admin-login').classList.remove('show');
}

function loginAdmin() {
  const pass = document.getElementById('admin-pass').value;
  const correct = DB.get('admin_pass') || 'admin123';
  if (pass === correct) {
    closeAdminLogin();
    openAdminPanel();
  } else {
    showToast('âŒ Kata sandi salah!', 'error');
    document.getElementById('admin-pass').value = '';
    document.getElementById('admin-pass').focus();
  }
}

function openAdminPanel() {
  document.getElementById('admin-panel').classList.add('show');
  document.body.style.overflow = 'hidden';
  refreshAdminData();
}

function exitAdmin() {
  document.getElementById('admin-panel').classList.remove('show');
  document.body.style.overflow = '';
}

function switchAdminTab(tab, btn) {
  document.querySelectorAll('.admin-section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.admin-nav button').forEach(b => b.classList.remove('active'));
  document.getElementById('tab-' + tab).classList.add('active');
  btn.classList.add('active');
  if (tab === 'products') renderAdminProducts();
  if (tab === 'orders') renderAdminOrders();
  if (tab === 'shipping') renderShippingZones();
  if (tab === 'banner') renderBannerSettings();
  if (tab === 'settings') updateSystemInfo();
}

function refreshAdminData() {
  renderAdminProducts();
  renderAdminOrdersTable('orders-table', 5);
  renderShippingZones();
}

function renderAdminProducts() {
  const products = DB.get('products') || [];
  const tbody = document.getElementById('products-table');
  if (!tbody) return;
  tbody.innerHTML = '<tr><th>Icon</th><th>Nama</th><th>Kategori</th><th>Harga</th><th>Status</th><th>Aksi</th></tr>' +
    products.map(p => `
      <tr>
        <td style="font-size:24px;">${p.icon}</td>
        <td>${p.name}</td>
        <td><span class="badge badge-blue">${p.cat}</span></td>
        <td>${formatRp(p.price)}</td>
        <td>${p.active ? '<span class="badge badge-green">Aktif</span>' : '<span class="badge badge-red">Nonaktif</span>'}</td>
        <td>
          <button class="btn-edit" onclick="editProduct(${p.id})">âœï¸ Edit</button>
          <button class="btn-del" onclick="deleteProduct(${p.id})">ğŸ—‘ï¸ Hapus</button>
        </td>
      </tr>
    `).join('');
  document.getElementById('stat-products').textContent = products.filter(p => p.active).length;
  document.getElementById('sys-products').textContent = products.length;
}

function renderAdminOrders() {
  renderAdminOrdersTable('orders-full-table', 999);
}

function renderAdminOrdersTable(tableId, limit) {
  const orders = (DB.get('orders') || []).slice(0, limit);
  const t = document.getElementById(tableId);
  if (!t) return;
  const statusColors = { 'Selesai':'badge-green', 'Proses':'badge-gold', 'Pengiriman':'badge-blue', 'Menunggu':'badge-red', 'Dibatalkan':'badge-red' };
  t.innerHTML = (tableId === 'orders-full-table' 
    ? '<tr><th>#Order</th><th>Pelanggan</th><th>WA</th><th>Produk</th><th>Total</th><th>Bayar</th><th>Status</th><th>Aksi</th></tr>'
    : '<tr><th>#</th><th>Pelanggan</th><th>Produk</th><th>Total</th><th>Metode Bayar</th><th>Status</th><th>Aksi</th></tr>') +
    orders.map(o => `
      <tr>
        <td><strong style="color:var(--gold);">${o.id}</strong></td>
        <td>${o.name}</td>
        ${tableId === 'orders-full-table' ? `<td><a href="https://wa.me/${o.phone}" target="_blank" style="color:var(--green);">ğŸ’¬ ${o.phone}</a></td>` : ''}
        <td style="max-width:200px;overflow:hidden;text-overflow:ellipsis;">${o.products}</td>
        <td>${formatRp(o.total)}</td>
        <td><span class="badge badge-blue">${o.payment}</span></td>
        <td><span class="badge ${statusColors[o.status]||'badge-gold'}">${o.status}</span></td>
        <td>
          <select onchange="updateOrderStatus('${o.id}', this.value)" style="background:var(--dark4);border:1px solid var(--border);color:var(--text);padding:4px 8px;border-radius:6px;font-size:12px;">
            ${['Menunggu','Proses','Pengiriman','Selesai','Dibatalkan'].map(s => `<option value="${s}" ${s===o.status?'selected':''}>${s}</option>`).join('')}
          </select>
        </td>
      </tr>
    `).join('');
  document.getElementById('sys-orders').textContent = (DB.get('orders')||[]).length;
}

function updateOrderStatus(id, status) {
  const orders = DB.get('orders') || [];
  const o = orders.find(x => x.id === id);
  if (o) { o.status = status; DB.set('orders', orders); showToast('Status pesanan diperbarui!', 'success'); }
}

function showAddProductForm() {
  document.getElementById('pf-id').value = '';
  document.getElementById('pf-name').value = '';
  document.getElementById('pf-cat').value = 'percetakan';
  document.getElementById('pf-price').value = '';
  document.getElementById('pf-old-price').value = '';
  document.getElementById('pf-desc').value = '';
  document.getElementById('pf-icon').value = '';
  document.getElementById('pf-badge').value = '';
  document.getElementById('pf-unit').value = '';
  document.getElementById('pf-bg').value = '';
  document.getElementById('pf-title').textContent = 'â• Tambah Produk Baru';
  document.getElementById('pf-active-switch').className = 'switch on';
  document.getElementById('product-form').style.display = 'block';
  document.getElementById('product-form').scrollIntoView({ behavior:'smooth' });
}

function editProduct(id) {
  const products = DB.get('products') || [];
  const p = products.find(x => x.id === id);
  if (!p) return;
  document.getElementById('pf-id').value = p.id;
  document.getElementById('pf-name').value = p.name;
  document.getElementById('pf-cat').value = p.cat;
  document.getElementById('pf-price').value = p.price;
  document.getElementById('pf-old-price').value = p.oldPrice || '';
  document.getElementById('pf-desc').value = p.desc;
  document.getElementById('pf-icon').value = p.icon;
  document.getElementById('pf-badge').value = p.badge;
  document.getElementById('pf-unit').value = p.unit;
  document.getElementById('pf-bg').value = p.bg;
  document.getElementById('pf-title').textContent = 'âœï¸ Edit Produk: ' + p.name;
  document.getElementById('pf-active-switch').className = 'switch ' + (p.active ? 'on' : '');
  document.getElementById('product-form').style.display = 'block';
  document.getElementById('product-form').scrollIntoView({ behavior:'smooth' });
}

function saveProduct() {
  const id = document.getElementById('pf-id').value;
  const products = DB.get('products') || [];
  const isActive = document.getElementById('pf-active-switch').classList.contains('on');
  
  const data = {
    id: id ? parseInt(id) : Date.now(),
    name: document.getElementById('pf-name').value,
    cat: document.getElementById('pf-cat').value,
    price: parseInt(document.getElementById('pf-price').value) || 0,
    oldPrice: parseInt(document.getElementById('pf-old-price').value) || 0,
    desc: document.getElementById('pf-desc').value,
    icon: document.getElementById('pf-icon').value || 'ğŸ“¦',
    badge: document.getElementById('pf-badge').value,
    unit: document.getElementById('pf-unit').value || 'per unit',
    bg: document.getElementById('pf-bg').value || 'linear-gradient(135deg,#1a1a1a,#2a2a2a)',
    active: isActive,
  };
  
  if (!data.name || !data.price) { showToast('Nama dan harga wajib diisi!', 'error'); return; }
  
  if (id) {
    const idx = products.findIndex(p => p.id === parseInt(id));
    if (idx >= 0) products[idx] = data;
  } else {
    products.push(data);
  }
  
  DB.set('products', products);
  renderProducts();
  renderAdminProducts();
  cancelProductForm();
  showToast('âœ… Produk berhasil disimpan!', 'success');
}

function deleteProduct(id) {
  if (!confirm('Hapus produk ini?')) return;
  const products = (DB.get('products') || []).filter(p => p.id !== id);
  DB.set('products', products);
  renderProducts();
  renderAdminProducts();
  showToast('Produk dihapus!', 'success');
}

function cancelProductForm() {
  document.getElementById('product-form').style.display = 'none';
}

// SHIPPING ZONES ADMIN
function renderShippingZones() {
  const zones = DB.get('shipping_zones') || DEFAULT_SHIPPING_ZONES;
  document.getElementById('shipping-zones').innerHTML = zones.map((z, i) => `
    <div style="display:grid;grid-template-columns:1fr 1fr 1fr auto;gap:12px;align-items:end;margin-bottom:12px;">
      <div class="form-group" style="margin-bottom:0;">
        <label>Dari (km)</label>
        <input type="number" value="${z.km_min}" onchange="updateZone(${i},'km_min',this.value)">
      </div>
      <div class="form-group" style="margin-bottom:0;">
        <label>Sampai (km)</label>
        <input type="number" value="${z.km_max}" onchange="updateZone(${i},'km_max',this.value)">
      </div>
      <div class="form-group" style="margin-bottom:0;">
        <label>Biaya (Rp)</label>
        <input type="number" value="${z.price}" onchange="updateZone(${i},'price',this.value)">
      </div>
      <button class="btn-del" onclick="deleteZone(${i})" style="padding:10px;">âœ•</button>
    </div>
  `).join('');
}

function updateZone(i, key, val) {
  const zones = DB.get('shipping_zones') || [];
  zones[i][key] = parseFloat(val);
  DB.set('shipping_zones', zones);
}

function addShippingZone() {
  const zones = DB.get('shipping_zones') || [];
  zones.push({ km_min:0, km_max:0, price:0 });
  DB.set('shipping_zones', zones);
  renderShippingZones();
}

function deleteZone(i) {
  const zones = (DB.get('shipping_zones') || []).filter((_, idx) => idx !== i);
  DB.set('shipping_zones', zones);
  renderShippingZones();
}

function saveShippingSettings() {
  showToast('âœ… Pengaturan ongkir disimpan!', 'success');
}

// BANNER/ETALASE
function renderBannerSettings() {
  const tickers = DB.get('ticker_items') || ['âœ… Gratis Desain untuk pemesanan pertama', 'ğŸšš Ongkir Otomatis berdasarkan jarak GPS', 'ğŸ’³ QRIS & COD tersedia semua bank'];
  document.getElementById('ticker-items').innerHTML = tickers.map((t, i) => `
    <div style="display:flex;gap:8px;margin-bottom:8px;">
      <input type="text" value="${t}" id="ticker-${i}" style="flex:1;padding:10px;border-radius:8px;background:var(--dark4);border:1px solid var(--border);color:var(--text);">
      <button class="btn-del" onclick="deleteTicker(${i})">âœ•</button>
    </div>
  `).join('');
}

function addTickerItem() {
  const tickers = DB.get('ticker_items') || [];
  tickers.push('Teks baru...');
  DB.set('ticker_items', tickers);
  renderBannerSettings();
}

function deleteTicker(i) {
  const tickers = (DB.get('ticker_items') || []).filter((_, idx) => idx !== i);
  DB.set('ticker_items', tickers);
  renderBannerSettings();
}

function saveTickerItems() {
  const inputs = document.querySelectorAll('[id^="ticker-"]');
  const items = [...inputs].map(i => i.value);
  DB.set('ticker_items', items);
  showToast('âœ… Ticker diperbarui!', 'success');
}

function saveEtalaseSettings() {
  const hero = document.querySelector('.hero h1');
  const heroDesc = document.querySelector('.hero > .hero-content > div > p');
  const promoEl = document.querySelector('.promo-banner h3');
  const promoCode = document.querySelector('.promo-code');
  const stats = document.querySelectorAll('.stat-num');
  const statLabels = document.querySelectorAll('.stat-label');
  
  if (hero) hero.innerHTML = document.getElementById('hero-title-edit').value + '<span></span>';
  if (heroDesc) heroDesc.textContent = document.getElementById('hero-desc-edit').value;
  if (promoEl) promoEl.textContent = document.getElementById('promo-text-edit').value;
  if (promoCode) promoCode.textContent = document.getElementById('promo-code-edit').value;
  
  if (stats[0]) stats[0].textContent = document.getElementById('stat1-num').value;
  if (statLabels[0]) statLabels[0].textContent = document.getElementById('stat1-lbl').value;
  if (stats[1]) stats[1].textContent = document.getElementById('stat2-num').value;
  if (statLabels[1]) statLabels[1].textContent = document.getElementById('stat2-lbl').value;
  if (stats[2]) stats[2].textContent = document.getElementById('stat3-num').value;
  if (statLabels[2]) statLabels[2].textContent = document.getElementById('stat3-lbl').value;
  
  DB.set('etalase_settings', {
    heroTitle: document.getElementById('hero-title-edit').value,
    heroDesc: document.getElementById('hero-desc-edit').value,
    promoText: document.getElementById('promo-text-edit').value,
    promoCode: document.getElementById('promo-code-edit').value,
  });
  
  showToast('âœ… Etalase berhasil diperbarui!', 'success');
}

// SETTINGS
function changePassword() {
  const old = document.getElementById('old-pass').value;
  const nw = document.getElementById('new-pass').value;
  const cf = document.getElementById('confirm-pass').value;
  const current = DB.get('admin_pass') || 'admin123';
  if (old !== current) { showToast('âŒ Kata sandi lama salah!', 'error'); return; }
  if (nw.length < 6) { showToast('âŒ Kata sandi minimal 6 karakter!', 'error'); return; }
  if (nw !== cf) { showToast('âŒ Konfirmasi kata sandi tidak cocok!', 'error'); return; }
  DB.set('admin_pass', nw);
  document.getElementById('old-pass').value = '';
  document.getElementById('new-pass').value = '';
  document.getElementById('confirm-pass').value = '';
  showToast('âœ… Kata sandi berhasil diubah!', 'success');
}

function saveStoreSettings() {
  DB.set('store_settings', {
    name: document.getElementById('store-name').value,
    wa: document.getElementById('store-wa').value,
    address: document.getElementById('store-address').value,
    lat: parseFloat(document.getElementById('store-lat').value),
    lng: parseFloat(document.getElementById('store-lng').value),
    gmapsId: document.getElementById('gmaps-place-id').value,
  });
  showToast('âœ… Pengaturan toko disimpan!', 'success');
}

function updateSystemInfo() {
  document.getElementById('sys-products').textContent = (DB.get('products')||[]).length;
  document.getElementById('sys-orders').textContent = (DB.get('orders')||[]).length;
}

function exportData() {
  const data = {
    products: DB.get('products'),
    orders: DB.get('orders'),
    reviews: DB.get('reviews'),
    shipping_zones: DB.get('shipping_zones'),
    store_settings: DB.get('store_settings'),
    exported_at: new Date().toISOString()
  };
  const blob = new Blob([JSON.stringify(data, null, 2)], { type:'application/json' });
  const a = document.createElement('a');
  a.href = URL.createObjectURL(blob);
  a.download = 'prima-jaya-export.json';
  a.click();
  showToast('âœ… Data berhasil diexport!', 'success');
}

function resetAllData() {
  localStorage.clear();
  initData();
  renderProducts();
  renderReviews();
  showToast('ğŸ”„ Data direset ke default!', 'success');
}

// SWITCH TOGGLE
function toggleSwitch(el) {
  el.classList.toggle('on');
}

// ============================
// MODAL HELPERS
// ============================
function openModal(id) {
  document.getElementById(id).classList.add('show');
  document.body.style.overflow = 'hidden';
}

function closeModal(id) {
  document.getElementById(id).classList.remove('show');
  document.body.style.overflow = '';
  if (id === 'checkout-modal') checkoutStep = 1;
  modalQty = 1;
}

// Close on overlay click
document.querySelectorAll('.modal-overlay').forEach(m => {
  m.addEventListener('click', function(e) {
    if (e.target === this) closeModal(this.id);
  });
});

// ============================
// TOAST
// ============================
let toastTimer;
function showToast(msg, type = 'success') {
  const t = document.getElementById('toast');
  const icon = document.getElementById('toast-icon');
  document.getElementById('toast-msg').textContent = msg;
  t.className = 'toast ' + type + ' show';
  icon.textContent = type === 'success' ? 'âœ…' : 'âŒ';
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => t.classList.remove('show'), 3000);
}

// ============================
// UTILS
// ============================
function formatRp(num) {
  return 'Rp ' + num.toLocaleString('id-ID');
}

// ============================
// INIT
// ============================
document.addEventListener('DOMContentLoaded', () => {
  initData();
  renderProducts();
  renderReviews();
  updateCartUI();
  
  // Nav active state
  const navLinks = document.querySelectorAll('nav a');
  window.addEventListener('scroll', () => {
    const sections = ['hero','products','shipping','reviews'];
    let current = '';
    sections.forEach(s => {
      const el = document.getElementById(s);
      if (el && window.scrollY >= el.offsetTop - 100) current = s;
    });
    navLinks.forEach(l => {
      l.classList.toggle('active', l.getAttribute('href') === '#' + current);
    });
  });
  
  // Init shipping range
  updateShipping();
});
</script>
</body>
</html>
